INCLUDE "gbhw.asm"
INCLUDE "sound_constants.asm"
INCLUDE "hram.asm"

SECTION "bank 3", ROMX, BANK[3]
LevelPointersBank3:: ; 3:4000
	dw $503F
	dw $5074
	dw $509B
	dw $503F
	dw $5074
	dw $509B
	dw $503F	; 3-1
	dw $5074	; 3-2
	dw $509B	; 3-3
	dw $503F
	dw $5074
	dw $509B
	dw $50C0	; End of world "hangar"

LevelEnemyPointersBank3:: ; 3:401A
	dw $4E74
	dw $4F1D
	dw $4FD8
	dw $4E74
	dw $4F1D
	dw $4FD8
	dw $4E74	; 3-1
	dw $4F1D	; 3-2
	dw $4FD8	; 3-3
	dw $4E74
	dw $4F1D
	dw $4FD8

INCBIN "gfx/enemiesWorld3.2bpp"
INCBIN "gfx/backgroundWorld3.2bpp"

ReadJoypad:: ; 47F2
	ld a, $20		; select button keys
	ldh [rJOYP], a
	ldh a, [rJOYP]
	ldh a, [rJOYP]	; read multiple times to avoid switch bounce
	cpl				; 0 means pressed
	and a, $0F
	swap a
	ld b, a
	ld a, $10		; select direction keys
	ldh [rJOYP], a
	ldh a, [rJOYP]
	ldh a, [rJOYP]
	ldh a, [rJOYP]
	ldh a, [rJOYP]
	ldh a, [rJOYP]
	ldh a, [rJOYP]
	cpl
	and a, $0F
	or b
	ld c, a
	ldh a, [hJoyHeld]
	xor c			; set all bits which are different since the previous time
	and c			; and keep only the ones that are pressed now
	ldh [hJoyPressed], a
	ld a, c
	ldh [hJoyHeld], a
	ld a, $30
	ldh [rJOYP], a	; deselect keys
	ret

Call_4823:: ; 4823
	ld a, h
	ldh [$FF96], a
	ld a, l
	ldh [$FF97], a
	ld a, [hl]
	and a
	jr z, .jmp_484A
	cp a, $80
	jr z, .jmp_4848
.jmp_4831
	ldh a, [$FF96]
	ld h, a
	ldh a, [$FF97]
	ld l, a
	ld de, $0010
	add hl, de
	ldh a, [$FF8F]
	dec a
	ldh [$FF8F], a
	ret z
	jr Call_4823

.jmp_4843
	xor a
	ldh [$FF95], a
	jr .jmp_4831

.jmp_4848
	ldh [$FF95], a
.jmp_484A
	ld b, 7
	ld de, $FF86
.jmp_484F
	ldi a, [hl]
	ld [de], a
	inc de
	dec b
	jr nz, .jmp_484F
	ldh a, [$FF89]
	ld hl, $4C37
	rlca
	ld e, a
	ld d, $00
	add hl, de
	ld e, [hl]
	inc hl
	ld d, [hl]
	ld a, [de]
	ld l, a
	inc de
	ld a, [de]
	ld h, a
	inc de
	ld a, [de]
	ldh [$FF90], a
	inc de
	ld a, [de]
	ldh [$FF91], a
	ld e, [hl]
	inc hl
	ld d, [hl]
.jmp_4872
	inc hl
	ldh a, [$FF8C]
	ldh [$FF94], a
	ld a, [hl]
	cp a, $FF
	jr z, .jmp_4843
	cp a, $FD
	jr nz, .jmp_488C
	ldh a, [$FF8C]
	xor a, $10
	ldh [$FF94], a
	jr .jmp_4872

.jmp_4888
	inc de
	inc de
	jr .jmp_4872

.jmp_488C
	cp a, $FE
	jr z, .jmp_4888
	ldh [$FF89], a
	ldh a, [$FF87]
	ld b, a
	ld a, [de]
	ld c, a
	ldh a, [$FF8B]
	bit 6, a
	jr nz, .jmp_48A3
	ldh a, [$FF90]
	add b
	adc c
	jr .jmp_48AD

.jmp_48A3
	ld a, b
	push af
	ldh a, [$FF90]
	ld b, a
	pop af
	sub b
	sbc c
	sbc a, $08
.jmp_48AD
	ldh [$FF93], a
	ldh a, [$FF88]
	ld b, a
	inc de
	ld a, [de]
	inc de
	ld c, a
	ldh a, [$FF8B]
	bit 5, a
	jr nz, .jmp_48C2
	ldh a, [$FF91]
	add b
	adc c
	jr .jmp_48CC

.jmp_48C2
	ld a, b
	push af
	ldh a, [$FF91]
	ld b, a
	pop af
	sub b
	sbc c
	sbc a, $08
.jmp_48CC
	ldh [$FF92], a
	push hl
	ldh a, [$FF8D]
	ld h, a
	ldh a, [$FF8E]
	ld l, a
	ldh a, [$FF95]
	and a
	jr z, .jmp_48DE
	ld a, $FF
	jr .jmp_48E0

.jmp_48DE
	ldh a, [$FF93]
.jmp_48E0
	ldi [hl], a
	ldh a, [$FF92]
	ldi [hl], a
	ldh a, [$FF89]
	ldi [hl], a
	ldh a, [$FF94]
	ld b, a
	ldh a, [$FF8B]
	or b
	ld b, a
	ldh a, [$FF8A]
	or b
	ldi [hl], a
	ld a, h
	ldh [$FF8D], a
	ld a, l
	ldh [$FF8E], a
	pop hl
	jp .jmp_4872

.jmp_48FC
	ld hl, $C209
	ld a, [hl]
	ld b, a
	and a
	ret z
	dec l
	ld a, [hl]
	cp a, $0F
	ret nc
	ld [hl], b
	inc l
	ld [hl], 0
	ret

Call_490D:: ; 490D
	ld a, [bc]			; C2x8
	ld e, a
	ld d, $00
	dec c
	ld a, [bc]			; C2x7
	dec c
	dec c
	dec c
	dec c
	dec c
	dec c
	and a
	ret z
	cp a, $02
	jr z, .jmp_4933
	add hl, de
	ld a, [hl]
	cp a, $7F
	jr z, .jmp_4948
	ld a, [bc]			; C2x1
	sub [hl]
	ld [bc], a
	inc e
.jmp_4929
	ld a, e
	inc c
	inc c
	inc c
	inc c
	inc c
	inc c
	inc c
	ld [bc], a			; C2x8
	ret

.jmp_4933
	ld a, e
	cp a, $FF
	jr z, .jmp_495B
	add hl, de
	ld a, [hl]
	cp a, $7F
	jr z, .jmp_4944
.jmp_493E
	ld a, [bc]			; C2x1
	add [hl]
	ld [bc], a
	dec e
	jr .jmp_4929

.jmp_4944
	dec hl
	dec e
	jr .jmp_493E

.jmp_4948
	dec de
	dec hl
	ld a, $02
	inc c
	inc c
	inc c
	inc c
	inc c
	inc c
	ld [bc], a
	dec c
	dec c
	dec c
	dec c
	dec c
	dec c
	jr .jmp_493E

.jmp_495B
	xor a
	inc c
	inc c
	inc c
	inc c
	inc c
	inc c
	ld [bc], a
	inc c
	ld [bc], a
	ret

Data_C966::
    db   $1C, $1A, $FE, $0F, $30, $49, $1C, $3D   ; $4966
    db   $12, $1D, $3E, $0F, $12, $18, $40, $F5   ; $496E
    db   $1A, $A7, $20, $0E, $FA, $0C, $C2, $FE   ; $4976
    db   $03, $3E, $02, $38, $02, $3E, $04, $EA   ; $497E
    db   $0E, $C2, $F1, $18, $21, $F0, $B3, $FE   ; $4986
    db   $0D, $CA, $7F, $4A, $11, $07, $C2, $F0   ; $498E
    db   $81, $47, $F0, $80, $CB, $4F, $20, $D7   ; $4996
    db   $F5, $FA, $0E, $C2, $FE, $04, $20, $05   ; $499E
    db   $3E, $02, $EA, $0E, $C2, $F1, $CB, $47   ; $49A6
    db   $20, $0F, $1A, $FE, $01, $28, $B1, $CB   ; $49AE
    db   $78, $C2, $77, $4A, $CB, $48, $20, $3F   ; $49B6
    db   $C9, $1A, $A7, $20, $F2, $21, $0A, $C2   ; $49BE
    db   $7E, $A7, $28, $EB, $CB, $40, $28, $E7   ; $49C6
    db   $36, $00, $21, $03, $C2, $E5, $7E, $FE   ; $49CE
    db   $18, $28, $19, $E6, $F0, $F6, $04, $77   ; $49D6
    db   $FA, $0E, $C2, $FE, $04, $28, $08, $3E   ; $49DE
    db   $02, $EA, $0E, $C2, $EA, $08, $C2, $21   ; $49E6
    db   $0C, $C2, $36, $30, $21, $E0, $DF, $36   ; $49EE
    db   $01, $3E, $01, $12, $E1, $18, $B8, $21   ; $49F6
    db   $0C, $C2, $7E, $FE, $06, $20, $07, $F0   ; $49FE
    db   $9F, $A7, $20, $02, $36, $00, $F0, $B3   ; $4A06
    db   $FE, $0D, $06, $03, $28, $06, $F0, $B5   ; $4A0E
    db   $A7, $C8, $06, $01, $21, $A9, $FF, $11   ; $4A16
    db   $00, $C0, $2A, $A7, $28, $08, $1C, $1C   ; $4A1E
    db   $1C, $1C, $05, $20, $F5, $C9, $E5, $21   ; $4A26
    db   $05, $C2, $46, $21, $01, $C2, $2A, $C6   ; $4A2E
    db   $FE, $12, $1C, $0E, $02, $CB, $68, $28   ; $4A36
    db   $02, $0E, $F8, $2A, $81, $12, $0E, $60   ; $4A3E
    db   $1C, $F0, $B3, $FE, $0D, $20, $0A, $0E   ; $4A46
    db   $7A, $F0, $E4, $FE, $0B, $20, $02, $0E   ; $4A4E
    db   $6E, $79, $12, $1C, $AF, $12, $E1, $2D   ; $4A56
    db   $0E, $0A, $CB, $68, $20, $02, $0E, $09   ; $4A5E
    db   $71, $21, $E0, $DF, $36, $02, $3E, $0C   ; $4A66
    db   $EA, $AE, $C0, $3E, $FF, $EA, $A9, $C0   ; $4A6E
    db   $C9, $21, $0C, $C2, $36, $20, $C3, $BA   ; $4A76
    db   $49, $F0, $81, $E6, $03, $20, $87, $F0   ; $4A7E
    db   $80, $CB, $47, $C8, $21, $AE, $C0, $7E   ; $4A86
    db   $A7, $CA, $0C, $4A, $35, $C9, $F0, $9F   ; $4A8E
    db   $A7, $C8, $FE, $FF, $C8, $FA, $D8, $C0   ; $4A96
    db   $A7, $28, $06, $3D, $EA, $D8, $C0, $18   ; $4A9E
    db   $2A, $FA, $DC, $C0, $CB, $27, $5F, $16   ; $4AA6
    db   $00, $21, $E4, $4A, $19, $5E, $23, $56   ; $4AAE
    db   $D5, $E1, $FA, $D9, $C0, $16, $00, $5F   ; $4AB6
    db   $19, $2A, $FE, $FF, $28, $1A, $EA, $DA   ; $4ABE
    db   $C0, $7E, $EA, $D8, $C0, $1C, $1C, $7B   ; $4AC6
    db   $EA, $D9, $C0, $F0, $80, $EA, $DB, $C0   ; $4ACE
    db   $FA, $DA, $C0, $E0, $80, $E0, $81, $C9   ; $4AD6
    db   $AF, $EA, $DA, $C0, $18, $ED, $50, $65   ; $4ADE
    db   $18, $64, $9A, $64, $06, $04, $11, $10   ; $4AE6
    db   $00, $21, $10, $C2, $E5, $7E, $FE, $80   ; $4AEE
    db   $20, $02, $36, $FF, $A7, $20, $1E, $D5   ; $4AF6
    db   $11, $07, $00, $19, $D1, $7E, $A7, $28   ; $4AFE
    db   $2B, $2D, $2D, $7E, $2D, $2D, $2D, $A7   ; $4B06
    db   $20, $15, $34, $F0, $F3, $4F, $F0, $A4   ; $4B0E
    db   $91, $4F, $7E, $91, $77, $E1, $19, $05   ; $4B16
    db   $20, $D2, $F0, $A4, $E0, $F3, $C9, $35   ; $4B1E
    db   $F0, $F3, $4F, $F0, $A4, $91, $4F, $7E   ; $4B26
    db   $91, $77, $18, $E9, $E1, $E5, $36, $80   ; $4B2E
    db   $2C, $2C, $36, $FF, $18, $DF, $F0, $EE   ; $4B36
    db   $FE, $03, $C0, $21, $2D, $C0, $F0, $A4   ; $4B3E
    db   $47, $F0, $F2, $90, $32, $FA, $01, $C2   ; $4B46
    db   $D6, $0B, $77, $FA, $0A, $C2, $A7, $20   ; $4B4E
    db   $0B, $F0, $F1, $47, $D6, $04, $BE, $30   ; $4B56
    db   $0A, $78, $BE, $D0, $36, $00, $3E, $04   ; $4B5E
    db   $E0, $EE, $C9, $3E, $02, $EA, $07, $C2   ; $4B66
    db   $C9, $21, $01, $C2, $7E, $FE, $B4, $D8   ; $4B6E
    db   $FE, $C0, $D0, $AF, $E0, $99, $E0, $B5   ; $4B76
    db   $3C, $E0, $B3, $3C, $EA, $E8, $DF, $3E   ; $4B7E
    db   $90, $E0, $A6, $C9, $F0, $99, $FE, $01   ; $4B86
    db   $C0, $F0, $A6, $A7, $28, $10, $E6, $03   ; $4B8E
    db   $C0, $AF, $EA, $00, $C2, $FA, $03, $C2   ; $4B96
    db   $EE, $10, $EA, $03, $C2, $C9, $3E, $02   ; $4B9E
    db   $E0, $99, $AF, $EA, $00, $C2, $FA, $03   ; $4BA6
    db   $C2, $F6, $10, $EA, $03, $C2, $C9, $F0   ; $4BAE
    db   $99, $FE, $04, $28, $25, $FE, $03, $C0   ; $4BB6
    db   $F0, $A6, $A7, $28, $0C, $E6, $03, $C0   ; $4BBE
    db   $FA, $03, $C2, $EE, $10, $EA, $03, $C2   ; $4BC6
    db   $C9, $3E, $04, $E0, $99, $3E, $40, $E0   ; $4BCE
    db   $A6, $FA, $03, $C2, $E6, $0F, $EA, $03   ; $4BD6
    db   $C2, $C9, $F0, $A6, $A7, $28, $0C, $E6   ; $4BDE
    db   $03, $C0, $FA, $00, $C2, $EE, $80, $EA   ; $4BE6
    db   $00, $C2, $C9, $AF, $E0, $99, $EA, $00   ; $4BEE
    db   $C2, $FA, $03, $C2, $E6, $0F, $EA, $03   ; $4BF6
    db   $C2, $C9, $F0, $9F, $FE, $FF, $C0, $F0   ; $4BFE
    db   $80, $47, $FA, $DA, $C0, $B8, $28, $21   ; $4C06
    db   $21, $00, $C3, $FA, $D9, $C0, $5F, $16   ; $4C0E
    db   $00, $19, $FA, $DA, $C0, $22, $FA, $D8   ; $4C16
    db   $C0, $77, $1C, $1C, $7B, $EA, $D9, $C0   ; $4C1E
    db   $78, $EA, $DA, $C0, $AF, $EA, $D8, $C0   ; $4C26
    db   $C9, $FA, $D8, $C0, $3C, $EA, $D8, $C0   ; $4C2E
    db   $C9, $8D, $4C, $91, $4C, $95, $4C, $99   ; $4C36
    db   $4C, $9D, $4C, $A1, $4C, $A5, $4C, $A9   ; $4C3E
    db   $4C, $8D, $4C, $91, $4C, $B1, $4C, $B5   ; $4C46
    db   $4C, $B9, $4C, $BD, $4C, $A5, $4C, $AD   ; $4C4E
    db   $4C, $C1, $4C, $C5, $4C, $C9, $4C, $CD   ; $4C56
    db   $4C, $D1, $4C, $D5, $4C, $D9, $4C, $DD   ; $4C5E
    db   $4C, $E1, $4C, $E5, $4C, $E9, $4C, $ED   ; $4C66
    db   $4C, $F1, $4C, $F5, $4C, $F5, $4C, $F5   ; $4C6E
    db   $4C, $F9, $4C, $FD, $4C, $01, $4D, $05   ; $4C76
    db   $4D, $09, $4D, $0D, $4D, $19, $4D, $15   ; $4C7E
    db   $4D, $11, $4D, $1D, $4D, $21, $4D, $25   ; $4C86
    db   $4D, $F9, $F8, $2C, $4D, $F9, $F8, $33   ; $4C8E
    db   $4D, $F9, $F8, $3A, $4D, $F9, $F8, $41   ; $4C96
    db   $4D, $F9, $F8, $48, $4D, $F9, $F8, $4F   ; $4C9E
    db   $4D, $F9, $FB, $56, $4D, $F9, $FB, $5D   ; $4CA6
    db   $4D, $FC, $FC, $61, $4D, $F9, $F8, $68   ; $4CAE
    db   $4D, $F9, $F8, $6F, $4D, $F9, $F8, $76   ; $4CB6
    db   $4D, $F9, $F8, $7D, $4D, $F9, $F8, $84   ; $4CBE
    db   $4D, $F9, $F8, $8B, $4D, $F9, $F8, $92   ; $4CC6
    db   $4D, $F9, $F8, $99, $4D, $F9, $F8, $A0   ; $4CCE
    db   $4D, $F9, $F8, $A7, $4D, $F9, $FB, $AE   ; $4CD6
    db   $4D, $F9, $FB, $B5, $4D, $F9, $F8, $BC   ; $4CDE
    db   $4D, $F9, $F8, $C3, $4D, $F9, $F8, $CA   ; $4CE6
    db   $4D, $F9, $F8, $D1, $4D, $F9, $F8, $D8   ; $4CEE
    db   $4D, $F9, $F8, $DF, $4D, $F9, $F8, $E6   ; $4CF6
    db   $4D, $F9, $F8, $ED, $4D, $F9, $F8, $F4   ; $4CFE
    db   $4D, $F9, $F8, $FB, $4D, $F9, $F8, $02   ; $4D06
    db   $4E, $F9, $F8, $09, $4E, $F9, $F8, $14   ; $4D0E
    db   $4E, $F9, $F7, $1F, $4E, $F9, $F8, $2A   ; $4D16
    db   $4E, $F9, $F8, $35, $4E, $F9, $F8, $44   ; $4D1E
    db   $4E, $00, $01, $10, $11, $FF, $44, $4E   ; $4D26
    db   $02, $03, $12, $13, $FF, $44, $4E, $04   ; $4D2E
    db   $05, $14, $15, $FF, $44, $4E, $00, $01   ; $4D36
    db   $16, $17, $FF, $44, $4E, $08, $09, $18   ; $4D3E
    db   $19, $FF, $44, $4E, $0A, $0B, $1A, $1B   ; $4D46
    db   $FF, $44, $4E, $00, $01, $0C, $0D, $FF   ; $4D4E
    db   $44, $4E, $00, $01, $1C, $1D, $FF, $44   ; $4D56
    db   $4E, $62, $FF, $44, $4E, $70, $71, $72   ; $4D5E
    db   $73, $FF, $44, $4E, $70, $71, $74, $73   ; $4D66
    db   $FF, $44, $4E, $63, $64, $65, $66, $FF   ; $4D6E
    db   $44, $4E, $63, $64, $65, $67, $FF, $44   ; $4D76
    db   $4E, $20, $21, $30, $31, $FF, $44, $4E   ; $4D7E
    db   $22, $23, $32, $33, $FF, $44, $4E, $24   ; $4D86
    db   $25, $34, $35, $FF, $44, $4E, $22, $23   ; $4D8E
    db   $36, $37, $FF, $44, $4E, $28, $29, $38   ; $4D96
    db   $39, $FF, $44, $4E, $2A, $2B, $3A, $3B   ; $4D9E
    db   $FF, $44, $4E, $2C, $2D, $3C, $3D, $FF   ; $4DA6
    db   $44, $4E, $2E, $2F, $3E, $3F, $FF, $44   ; $4DAE
    db   $4E, $40, $41, $42, $43, $FF, $44, $4E   ; $4DB6
    db   $44, $45, $46, $47, $FF, $44, $4E, $75   ; $4DBE
    db   $76, $77, $78, $FF, $44, $4E, $75, $76   ; $4DC6
    db   $79, $78, $FF, $44, $4E, $68, $69, $6A   ; $4DCE
    db   $6B, $FF, $44, $4E, $68, $6C, $6A, $6D   ; $4DD6
    db   $FF, $44, $4E, $A0, $A1, $B0, $B1, $FF   ; $4DDE
    db   $44, $4E, $A2, $A3, $B2, $B3, $FF, $44   ; $4DE6
    db   $4E, $4E, $49, $50, $51, $FF, $44, $4E   ; $4DEE
    db   $48, $49, $4A, $4B, $FF, $44, $4E, $0C   ; $4DF6
    db   $0D, $1C, $1D, $FF, $44, $4E, $2E, $2F   ; $4DFE
    db   $3E, $3F, $FF, $5C, $4E, $2C, $2C, $4F   ; $4E06
    db   $3C, $2D, $3D, $4C, $4D, $FF, $4C, $4E   ; $4E0E
    db   $0E, $4F, $2D, $4C, $1E, $3C, $3D, $4D   ; $4E16
    db   $FF, $5C, $4E, $26, $27, $4F, $3C, $2D   ; $4E1E
    db   $3D, $4C, $4D, $FF, $5C, $4E, $FE, $7C   ; $4E26
    db   $61, $7D, $6F, $7E, $7B, $7F, $FF, $5C   ; $4E2E
    db   $4E, $FE, $7C, $61, $7D, $6F, $7E, $61   ; $4E36
    db   $7D, $6F, $7E, $7B, $7F, $FF, $00, $00   ; $4E3E
    db   $00, $08, $08, $00, $08, $08, $00, $00   ; $4E46
    db   $00, $09, $00, $11, $00, $19, $08, $00   ; $4E4E
    db   $08, $09, $08, $11, $08, $19, $00, $00   ; $4E56
    db   $08, $00, $00, $08, $08, $08, $00, $10   ; $4E5E
    db   $08, $10, $00, $18, $08, $18, $00, $20   ; $4E66
    db   $08, $20, $00, $28, $08, $28             ; $4E6E

SECTION "bank 3 levels", ROMX[$503F], BANK[3]
Data_003_503F::
    db   $A5, $56, $A5, $56, $C2, $5C, $CC, $52   ; $503F
    db   $53, $53, $C9, $53, $53, $53, $20, $54   ; $5047
    db   $AA, $54, $F0, $54, $53, $53, $CC, $52   ; $504F
    db   $20, $54, $20, $54, $AA, $54, $53, $53   ; $5057
    db   $4E, $55, $4E, $55, $B9, $62, $3B, $63   ; $505F
    db   $B9, $62, $B9, $62, $B2, $63, $DD, $55   ; $5067
    db   $3B, $63, $49, $56, $FF, $C2, $5C, $A5   ; $506F
    db   $56, $C2, $5C, $C9, $57, $88, $58, $C9   ; $5077
    db   $57, $24, $59, $E7, $59, $24, $59, $4B   ; $507F
    db   $5A, $E7, $59, $88, $58, $4B, $5A, $BC   ; $5087
    db   $5A, $BC, $5A, $C9, $57, $C2, $5B, $4B   ; $508F
    db   $5C, $49, $56, $FF, $A5, $56, $A5, $56   ; $5097
    db   $C2, $5C, $81, $5D, $EF, $5D, $EF, $5D   ; $509F
    db   $81, $5D, $57, $5E, $C0, $5E, $EF, $5D   ; $50A7
    db   $EF, $5D, $5C, $5F, $CE, $5F, $4E, $60   ; $50AF
    db   $4E, $60, $42, $61, $42, $61, $05, $62   ; $50B7
    db   $FF, $2C, $52, $2C, $52, $2C, $52, $2C   ; $50BF
    db   $52, $FF, $00, $05, $01, $01, $05, $18   ; $50C7
    db   $88, $0A, $01, $02, $0A, $18, $88, $FF   ; $50CF
    db   $07, $00, $02, $07, $10, $78, $0B, $08   ; $50D7
    db   $01, $0B, $50, $30, $FF, $07, $02, $01   ; $50DF
    db   $07, $20, $80, $0E, $02, $02, $0E, $20   ; $50E7
    db   $80, $FF, $05, $05, $01, $05, $38, $58   ; $50EF
    db   $0F, $05, $02, $0F, $38, $58, $FF, $06   ; $50F7
    db   $02, $02, $06, $20, $80, $11, $08, $01   ; $50FF
    db   $11, $50, $60, $FF, $08, $07, $01, $08   ; $5107
    db   $48, $30, $0F, $07, $02, $0F, $48, $88   ; $510F
    db   $FF, $07, $01, $01, $07, $18, $40, $0B   ; $5117
    db   $02, $02, $0B, $20, $88, $FF, $03, $02   ; $511F
    db   $02, $03, $20, $80, $16, $07, $02, $16   ; $5127
    db   $48, $98, $FF, $06, $02, $01, $06, $20   ; $512F
    db   $90, $12, $06, $01, $12, $40, $88, $FF   ; $5137
    db   $04, $02, $28, $07, $03, $2A, $07, $0F   ; $513F
    db   $28, $0B, $0E, $2C, $0F, $13, $C0, $FF   ; $5147
    db   $04, $01, $28, $07, $0F, $2A, $0B, $13   ; $514F
    db   $28, $0D, $0E, $2A, $FF, $01, $0E, $2A   ; $5157
    db   $02, $08, $28, $02, $0F, $C0, $03, $02   ; $515F
    db   $07, $0A, $0A, $07, $0C, $0D, $C0, $0D   ; $5167
    db   $06, $28, $0E, $0B, $28, $FF, $01, $01   ; $516F
    db   $28, $01, $09, $28, $02, $12, $F0, $04   ; $5177
    db   $0E, $28, $07, $09, $28, $0B, $04, $2C   ; $517F
    db   $0E, $09, $C0, $0F, $04, $28, $11, $08   ; $5187
    db   $2A, $FF, $01, $09, $C0, $02, $04, $F0   ; $518F
    db   $02, $10, $C0, $04, $10, $28, $08, $0F   ; $5197
    db   $2C, $09, $0F, $28, $0A, $0B, $28, $FF   ; $519F
    db   $04, $0F, $28, $06, $0A, $2C, $0C, $02   ; $51A7
    db   $28, $12, $02, $2A, $13, $11, $28, $FF   ; $51AF
    db   $05, $03, $28, $07, $00, $C0, $0D, $04   ; $51B7
    db   $2A, $0F, $03, $28, $FF, $01, $12, $28   ; $51BF
    db   $02, $0A, $C0, $04, $0F, $F0, $06, $0D   ; $51C7
    db   $28, $08, $0C, $07, $0A, $13, $28, $FF   ; $51CF
    db   $01, $12, $28, $02, $09, $C0, $07, $0B   ; $51D7
    db   $28, $08, $09, $2A, $0B, $04, $F0, $0F   ; $51DF
    db   $03, $28, $FF, $03, $10, $28, $08, $09   ; $51E7
    db   $C0, $0A, $07, $28, $0C, $00, $2C, $0E   ; $51EF
    db   $11, $C0, $0F, $11, $28, $10, $11, $C0   ; $51F7
    db   $14, $09, $28, $15, $03, $2A, $FF, $05   ; $51FF
    db   $0A, $28, $08, $06, $28, $0A, $09, $28   ; $5207
    db   $0D, $05, $2C, $0F, $05, $28, $11, $00   ; $520F
    db   $C0, $FF, $03, $0E, $28, $09, $0A, $28   ; $5217
    db   $0A, $0E, $2A, $0C, $0E, $2C, $0F, $0E   ; $521F
    db   $28, $18, $07, $28, $FF, $02, $8E, $8F   ; $5227
    db   $D3, $8E, $8F, $8E, $FE, $02, $8F, $8E   ; $522F
    db   $D3, $8F, $8E, $8F, $FE, $02, $8E, $8F   ; $5237
    db   $D3, $8E, $8F, $8E, $FE, $02, $8F, $8E   ; $523F
    db   $D3, $8F, $8E, $8F, $FE, $02, $8E, $8F   ; $5247
    db   $D3, $8E, $8F, $8E, $FE, $02, $8F, $8E   ; $524F
    db   $D3, $8F, $8E, $8F, $FE, $02, $8E, $8F   ; $5257
    db   $D3, $8E, $8F, $8E, $FE, $02, $8F, $8E   ; $525F
    db   $D3, $8F, $8E, $8F, $FE, $02, $8E, $8F   ; $5267
    db   $D3, $8E, $8F, $8E, $FE, $02, $8F, $8E   ; $526F
    db   $D3, $8F, $8E, $8F, $FE, $02, $8E, $8F   ; $5277
    db   $D3, $8E, $8F, $8E, $FE, $02, $8F, $8E   ; $527F
    db   $D3, $8F, $8E, $8F, $FE, $02, $8E, $8F   ; $5287
    db   $D3, $8E, $8F, $8E, $FE, $02, $8F, $8E   ; $528F
    db   $D3, $8F, $8E, $8F, $FE, $02, $8E, $8F   ; $5297
    db   $D3, $8E, $8F, $8E, $FE, $02, $8F, $8E   ; $529F
    db   $D3, $8F, $8E, $8F, $FE, $02, $8E, $8F   ; $52A7
    db   $D3, $8E, $8F, $8E, $FE, $02, $8F, $8E   ; $52AF
    db   $D3, $8F, $8E, $8F, $FE, $02, $8E, $8F   ; $52B7
    db   $D3, $8E, $8F, $8E, $FE, $02, $8F, $8E   ; $52BF
    db   $D3, $8F, $8E, $8F, $FE, $E2, $FD, $60   ; $52C7
    db   $FE, $21, $34, $C4, $3A, $3D, $61, $61   ; $52CF
    db   $FE, $12, $31, $35, $B5, $38, $3B, $3E   ; $52D7
    db   $60, $60, $FE, $12, $32, $36, $B5, $39   ; $52DF
    db   $3C, $3F, $61, $61, $FE, $12, $31, $35   ; $52E7
    db   $E2, $FD, $60, $FE, $12, $32, $36, $E2   ; $52EF
    db   $FD, $61, $FE, $12, $33, $37, $E2, $FD   ; $52F7
    db   $60, $FE, $E2, $FD, $61, $FE, $E2, $FD   ; $52FF
    db   $60, $FE, $E2, $FD, $61, $FE, $E2, $FD   ; $5307
    db   $60, $FE, $E2, $FD, $61, $FE, $D3, $3A   ; $530F
    db   $60, $60, $FE, $C4, $38, $3B, $61, $61   ; $5317
    db   $FE, $C4, $39, $3C, $60, $60, $FE, $41   ; $531F
    db   $34, $E2, $FD, $61, $FE, $32, $31, $35   ; $5327
    db   $A6, $3A, $3D, $40, $43, $60, $60, $FE   ; $532F
    db   $32, $32, $36, $97, $38, $3B, $3E, $41   ; $5337
    db   $44, $61, $61, $FE, $32, $33, $37, $97   ; $533F
    db   $39, $3C, $3F, $42, $45, $60, $60, $FE   ; $5347
    db   $E2, $FD, $61, $FE, $E2, $FD, $60, $FE   ; $534F
    db   $E2, $FD, $61, $FE, $B5, $70, $72, $72   ; $5357
    db   $60, $60, $FE, $61, $81, $B5, $71, $73   ; $535F
    db   $73, $61, $61, $FE, $E2, $FD, $60, $FE   ; $5367
    db   $E2, $FD, $61, $FE, $FE, $21, $34, $FE   ; $536F
    db   $12, $31, $35, $FE, $12, $32, $36, $E2   ; $5377
    db   $FD, $61, $FE, $12, $31, $35, $E2, $FD   ; $537F
    db   $60, $FE, $12, $32, $36, $E2, $FD, $61   ; $5387
    db   $FE, $12, $33, $37, $71, $81, $C4, $70   ; $538F
    db   $72, $60, $60, $FE, $71, $81, $C4, $71   ; $5397
    db   $73, $61, $61, $FE, $E2, $FD, $60, $FE   ; $539F
    db   $E2, $FD, $61, $FE, $A6, $3A, $3D, $40   ; $53A7
    db   $43, $60, $60, $FE, $97, $38, $3B, $3E   ; $53AF
    db   $41, $44, $61, $61, $FE, $97, $39, $3C   ; $53B7
    db   $3F, $42, $45, $60, $60, $FE, $E2, $FD   ; $53BF
    db   $61, $FE, $51, $82, $91, $63, $E2, $FD   ; $53C7
    db   $60, $FE, $51, $82, $91, $64, $E2, $FD   ; $53CF
    db   $61, $FE, $51, $82, $91, $63, $E2, $FD   ; $53D7
    db   $60, $FE, $51, $80, $91, $64, $E2, $FD   ; $53DF
    db   $61, $FE, $D3, $63, $60, $60, $FE, $D1   ; $53E7
    db   $64, $FE, $D1, $63, $FE, $D1, $64, $FE   ; $53EF
    db   $FE, $FE, $FE, $FE, $FE, $FE, $11, $34   ; $53F7
    db   $D1, $63, $FE, $02, $31, $35, $D3, $64   ; $53FF
    db   $61, $61, $FE, $02, $32, $36, $E2, $FD   ; $5407
    db   $60, $FE, $02, $33, $37, $E2, $FD, $61   ; $540F
    db   $FE, $E2, $FD, $60, $FE, $E2, $FD, $61   ; $5417
    db   $FE, $11, $81, $51, $63, $E2, $FD, $60   ; $541F
    db   $FE, $52, $64, $63, $E2, $FD, $61, $FE   ; $5427
    db   $61, $64, $91, $63, $E2, $FD, $60, $FE   ; $542F
    db   $91, $64, $E2, $FD, $61, $FE, $31, $5F   ; $5437
    db   $91, $63, $E2, $FD, $60, $FE, $91, $64   ; $543F
    db   $E2, $FD, $61, $FE, $D3, $63, $60, $60   ; $5447
    db   $FE, $D3, $64, $61, $61, $FE, $91, $63   ; $544F
    db   $FE, $91, $64, $FE, $91, $63, $FE, $91   ; $5457
    db   $64, $FE, $73, $FD, $63, $FE, $11, $F4   ; $545F
    db   $31, $F4, $51, $F4, $73, $FD, $64, $C4   ; $5467
    db   $3A, $3D, $40, $43, $FE, $B5, $38, $3B   ; $546F
    db   $3E, $41, $44, $FE, $B5, $39, $3C, $3F   ; $5477
    db   $42, $45, $FE, $42, $6A, $6B, $B5, $3A   ; $547F
    db   $3D, $40, $43, $3C, $FE, $41, $63, $A6   ; $5487
    db   $38, $47, $3D, $40, $43, $3C, $FE, $32   ; $548F
    db   $63, $64, $A5, $46, $3B, $3E, $41, $44   ; $5497
    db   $FE, $31, $64, $A6, $39, $3C, $3F, $42   ; $549F
    db   $45, $3C, $FE, $31, $64, $FE, $FE, $FE   ; $54A7
    db   $D3, $3A, $3D, $40, $FE, $C4, $38, $3B   ; $54AF
    db   $3E, $41, $FE, $21, $34, $C4, $39, $3C   ; $54B7
    db   $3F, $42, $FE, $12, $31, $35, $FE, $12   ; $54BF
    db   $32, $36, $FE, $12, $31, $35, $FE, $12   ; $54C7
    db   $32, $36, $FE, $12, $33, $37, $FE, $FE   ; $54CF
    db   $FE, $FE, $FE, $FE, $C4, $3A, $3D, $40   ; $54D7
    db   $43, $FE, $B5, $38, $3B, $3E, $41, $44   ; $54DF
    db   $FE, $B5, $39, $3C, $3F, $42, $45, $FE   ; $54E7
    db   $FE, $C4, $70, $72, $63, $63, $FE, $21   ; $54EF
    db   $34, $C4, $71, $73, $64, $64, $FE, $12   ; $54F7
    db   $31, $35, $FE, $12, $32, $36, $FE, $12   ; $54FF
    db   $33, $37, $A6, $FD, $63, $FE, $A6, $FD   ; $5507
    db   $64, $FE, $FE, $81, $F4, $A1, $F4, $C1   ; $550F
    db   $F4, $E1, $F4, $FE, $FE, $88, $FD, $63   ; $5517
    db   $FE, $88, $FD, $64, $FE, $FE, $81, $F4   ; $551F
    db   $A1, $F4, $C1, $F4, $E1, $F4, $FE, $FE   ; $5527
    db   $6A, $FD, $63, $FE, $6A, $FD, $64, $FE   ; $552F
    db   $78, $FD, $F4, $FE, $66, $6A, $6B, $6A   ; $5537
    db   $6B, $6A, $69, $F1, $63, $FE, $F1, $64   ; $553F
    db   $FE, $C4, $6A, $6B, $6A, $6B, $FE, $52   ; $5547
    db   $F4, $7F, $E2, $FD, $60, $FE, $52, $F4   ; $554F
    db   $7F, $E2, $FD, $61, $FE, $52, $F4, $7F   ; $5557
    db   $E2, $FD, $60, $FE, $52, $F4, $7F, $E2   ; $555F
    db   $FD, $61, $FE, $52, $F4, $7F, $E2, $FD   ; $5567
    db   $60, $FE, $52, $F4, $7F, $E2, $FD, $61   ; $556F
    db   $FE, $E2, $FD, $60, $FE, $A1, $81, $E2   ; $5577
    db   $FD, $61, $FE, $74, $70, $72, $72, $81   ; $557F
    db   $E2, $FD, $60, $FE, $11, $34, $74, $71   ; $5587
    db   $73, $73, $81, $E2, $FD, $61, $FE, $02   ; $558F
    db   $31, $35, $E2, $FD, $60, $FE, $02, $32   ; $5597
    db   $36, $E2, $FD, $61, $FE, $02, $33, $37   ; $559F
    db   $E2, $FD, $60, $FE, $A6, $3A, $3D, $40   ; $55A7
    db   $43, $61, $61, $FE, $97, $38, $3B, $3E   ; $55AF
    db   $41, $44, $60, $60, $FE, $97, $39, $3C   ; $55B7
    db   $3F, $42, $45, $61, $61, $FE, $E2, $FD   ; $55BF
    db   $60, $FE, $E2, $FD, $61, $FE, $A6, $63   ; $55C7
    db   $63, $63, $63, $60, $60, $FE, $A6, $64   ; $55CF
    db   $64, $64, $64, $61, $61, $FE, $FE, $FE   ; $55D7
    db   $61, $7F, $FE, $21, $81, $52, $F4, $7F   ; $55DF
    db   $FE, $21, $81, $52, $F4, $7F, $FE, $21   ; $55E7
    db   $81, $52, $F4, $7F, $E2, $FD, $61, $FE   ; $55EF
    db   $E2, $FD, $60, $FE, $E2, $FD, $61, $FE   ; $55F7
    db   $E2, $FD, $60, $FE, $FE, $B5, $FD, $63   ; $55FF
    db   $FE, $21, $34, $B5, $FD, $64, $FE, $12   ; $5607
    db   $31, $35, $88, $63, $63, $6A, $6B, $63   ; $560F
    db   $63, $6A, $6B, $FE, $12, $32, $36, $88   ; $5617
    db   $64, $64, $63, $63, $64, $64, $63, $63   ; $561F
    db   $FE, $12, $33, $37, $88, $6A, $6B, $64   ; $5627
    db   $64, $6A, $6B, $64, $64, $FE, $E2, $ED   ; $562F
    db   $61, $FE, $E2, $ED, $60, $FE, $E2, $ED   ; $5637
    db   $61, $FE, $E2, $ED, $60, $FE, $E2, $ED   ; $563F
    db   $61, $FE, $F1, $8E, $FE, $F1, $8F, $FE   ; $5647
    db   $F1, $8E, $FE, $F1, $8F, $FE, $F1, $8E   ; $564F
    db   $FE, $F1, $8F, $FE, $F1, $8E, $FE, $F1   ; $5657
    db   $8F, $FE, $F1, $8E, $FE, $F1, $8F, $FE   ; $565F
    db   $F1, $8E, $FE, $F1, $8F, $FE, $F1, $8E   ; $5667
    db   $FE, $F1, $8F, $FE, $F1, $8E, $FE, $F1   ; $566F
    db   $8F, $FE, $F1, $8E, $FE, $21, $8E, $F1   ; $5677
    db   $8F, $FE, $00, $13, $24, $8F, $8E, $8E   ; $567F
    db   $8E, $8E, $8E, $8E, $8E, $8E, $8E, $8E   ; $5687
    db   $13, $24, $8E, $FE, $00, $21, $48, $8E   ; $568F
    db   $8F, $8F, $8F, $8F, $8F, $8F, $8F, $8F   ; $5697
    db   $8F, $8F, $21, $48, $8F, $FE, $00, $FD   ; $569F
    db   $7F, $FE, $29, $F4, $F4, $F4, $F4, $F4   ; $56A7
    db   $F4, $F4, $F4, $80, $F1, $7F, $FE, $29   ; $56AF
    db   $F4, $F4, $F4, $F4, $F4, $F4, $F4, $F4   ; $56B7
    db   $82, $F1, $7F, $FE, $0B, $7F, $7F, $F4   ; $56BF
    db   $F4, $F4, $F4, $82, $F4, $F4, $F4, $82   ; $56C7
    db   $F1, $7F, $FE, $0B, $7F, $7F, $F4, $F4   ; $56CF
    db   $F4, $F4, $82, $F4, $F4, $F4, $82, $F1   ; $56D7
    db   $7F, $FE, $0B, $7F, $7F, $F4, $F4, $F4   ; $56DF
    db   $F4, $82, $F4, $F4, $F4, $82, $F1, $7F   ; $56E7
    db   $FE, $0B, $7F, $7F, $F4, $F4, $F4, $F4   ; $56EF
    db   $82, $F4, $F4, $F4, $82, $F1, $7F, $FE   ; $56F7
    db   $0B, $7F, $7F, $F4, $F4, $F4, $F4, $82   ; $56FF
    db   $F4, $F4, $F4, $F4, $F1, $7F, $FE, $0B   ; $5707
    db   $7F, $7F, $F4, $F4, $F4, $F4, $F4, $F4   ; $570F
    db   $F4, $F4, $82, $F1, $7F, $FE, $0B, $7F   ; $5717
    db   $7F, $F4, $F4, $F4, $F4, $82, $F4, $F4   ; $571F
    db   $F4, $82, $F1, $7F, $FE, $0B, $7F, $7F   ; $5727
    db   $F4, $F4, $F4, $F4, $82, $F4, $F4, $F4   ; $572F
    db   $82, $F1, $7F, $FE, $0B, $7F, $7F, $F4   ; $5737
    db   $F4, $F4, $F4, $82, $F4, $F4, $F4, $82   ; $573F
    db   $F1, $7F, $FE, $0B, $7F, $7F, $F4, $F4   ; $5747
    db   $F4, $F4, $82, $F4, $F4, $F4, $82, $F1   ; $574F
    db   $7F, $FE, $0B, $7F, $7F, $F4, $F4, $F4   ; $5757
    db   $F4, $82, $F4, $F4, $F4, $82, $F1, $7F   ; $575F
    db   $FE, $0B, $7F, $7F, $F4, $F4, $F4, $F4   ; $5767
    db   $82, $F4, $F4, $F4, $82, $F1, $7F, $FE   ; $576F
    db   $0B, $7F, $7F, $F4, $F4, $F4, $F4, $82   ; $5777
    db   $F4, $F4, $F4, $82, $F1, $7F, $FE, $0B   ; $577F
    db   $7F, $7F, $F4, $F4, $F4, $F4, $82, $F4   ; $5787
    db   $F4, $F4, $82, $F1, $7F, $FE, $0B, $7F   ; $578F
    db   $7F, $F4, $F4, $F4, $F4, $82, $F4, $F4   ; $5797
    db   $F4, $82, $D3, $74, $77, $7F, $FE, $0B   ; $579F
    db   $7F, $7F, $F4, $F4, $F4, $F4, $82, $F4   ; $57A7
    db   $F4, $F4, $81, $D3, $75, $78, $7F, $FE   ; $57AF
    db   $00, $72, $72, $72, $72, $72, $72, $72   ; $57B7
    db   $72, $72, $72, $72, $72, $72, $76, $79   ; $57BF
    db   $7F, $FE, $05, $64, $63, $6A, $6B, $69   ; $57C7
    db   $E2, $65, $67, $FE, $06, $63, $64, $63   ; $57CF
    db   $6A, $6B, $69, $E2, $66, $68, $FE, $1F   ; $57D7
    db   $FD, $5D, $FE, $1F, $FD, $5D, $FE, $03   ; $57DF
    db   $6A, $6B, $69, $E2, $65, $67, $FE, $06   ; $57E7
    db   $63, $6A, $6B, $6A, $6B, $69, $E2, $66   ; $57EF
    db   $68, $FE, $03, $64, $6A, $6B, $E2, $65   ; $57F7
    db   $67, $FE, $02, $63, $69, $C4, $70, $72   ; $57FF
    db   $66, $68, $FE, $02, $64, $69, $C4, $71   ; $5807
    db   $73, $65, $67, $FE, $05, $63, $64, $63   ; $580F
    db   $6A, $6B, $E2, $66, $68, $FE, $06, $64   ; $5817
    db   $63, $64, $6A, $6B, $69, $E2, $65, $67   ; $581F
    db   $FE, $05, $63, $64, $6A, $6B, $69, $E2   ; $5827
    db   $66, $68, $FE, $05, $64, $63, $6A, $6B   ; $582F
    db   $69, $E2, $65, $67, $FE, $05, $63, $64   ; $5837
    db   $6A, $6B, $69, $E2, $66, $68, $FE, $05   ; $583F
    db   $64, $6A, $6B, $6A, $6B, $E2, $65, $67   ; $5847
    db   $FE, $07, $63, $63, $63, $63, $6A, $6B   ; $584F
    db   $69, $E2, $66, $68, $FE, $05, $64, $64   ; $5857
    db   $64, $64, $69, $E2, $65, $67, $FE, $05   ; $585F
    db   $63, $63, $63, $63, $69, $E2, $66, $68   ; $5867
    db   $FE, $04, $FD, $64, $B5, $70, $72, $72   ; $586F
    db   $65, $67, $FE, $06, $63, $6A, $6B, $6A   ; $5877
    db   $6B, $69, $B5, $71, $73, $73, $66, $68   ; $587F
    db   $FE, $04, $63, $6A, $6B, $69, $E2, $65   ; $5887
    db   $67, $FE, $03, $64, $63, $69, $E2, $66   ; $588F
    db   $68, $FE, $03, $63, $64, $69, $E2, $65   ; $5897
    db   $67, $FE, $03, $64, $6A, $6B, $B5, $70   ; $589F
    db   $72, $72, $66, $68, $FE, $04, $63, $6A   ; $58A7
    db   $6B, $69, $B5, $71, $73, $73, $65, $67   ; $58AF
    db   $FE, $02, $64, $69, $E2, $66, $68, $FE   ; $58B7
    db   $02, $6A, $6B, $E2, $65, $67, $FE, $03   ; $58BF
    db   $6A, $6B, $69, $E2, $66, $68, $FE, $05   ; $58C7
    db   $63, $6A, $6B, $6A, $6B, $F1, $65, $FE   ; $58CF
    db   $02, $64, $63, $F1, $66, $FE, $03, $63   ; $58D7
    db   $64, $69, $F1, $65, $FE, $02, $64, $69   ; $58DF
    db   $F1, $66, $FE, $71, $81, $B1, $81, $F1   ; $58E7
    db   $65, $FE, $71, $82, $B1, $82, $F1, $66   ; $58EF
    db   $FE, $71, $81, $B1, $81, $F1, $65, $FE   ; $58F7
    db   $31, $5F, $F1, $66, $FE, $03, $6A, $6B   ; $58FF
    db   $69, $D3, $65, $67, $65, $FE, $02, $64   ; $5907
    db   $69, $D3, $66, $68, $66, $FE, $03, $63   ; $590F
    db   $6A, $6B, $E2, $65, $67, $FE, $02, $64   ; $5917
    db   $69, $E2, $66, $68, $FE, $02, $F4, $63   ; $591F
    db   $E2, $65, $67, $FE, $12, $64, $69, $E2   ; $5927
    db   $66, $68, $FE, $00, $F4, $63, $69, $5D   ; $592F
    db   $5D, $5D, $5D, $5D, $5D, $5D, $5D, $5D   ; $5937
    db   $5D, $5D, $5D, $5D, $FE, $1F, $64, $69   ; $593F
    db   $5D, $5D, $5D, $5D, $5D, $5D, $5D, $5D   ; $5947
    db   $5D, $5D, $5D, $5D, $5D, $FE, $00, $F4   ; $594F
    db   $63, $69, $5D, $5D, $5D, $5D, $5D, $5D   ; $5957
    db   $5D, $5D, $65, $67, $5D, $5D, $5D, $FE   ; $595F
    db   $1F, $64, $69, $5D, $5D, $5D, $5D, $5D   ; $5967
    db   $5D, $5D, $5D, $66, $68, $5D, $5D, $5D   ; $596F
    db   $FE, $00, $F4, $6A, $69, $5D, $5D, $5D   ; $5977
    db   $5D, $5D, $5D, $5D, $5D, $5D, $5D, $5D   ; $597F
    db   $5D, $5D, $FE, $1F, $70, $72, $63, $69   ; $5987
    db   $5D, $5D, $5D, $5D, $5D, $5D, $5D, $5D   ; $598F
    db   $5D, $5D, $5D, $FE, $1F, $71, $73, $64   ; $5997
    db   $69, $5D, $5D, $5D, $5D, $5D, $5D, $5D   ; $599F
    db   $5D, $5D, $5D, $5D, $FE, $E2, $66, $68   ; $59A7
    db   $FE, $61, $F4, $A1, $82, $E2, $65, $67   ; $59AF
    db   $FE, $A1, $81, $E2, $66, $68, $FE, $61   ; $59B7
    db   $F4, $92, $5F, $82, $E2, $65, $67, $FE   ; $59BF
    db   $A1, $81, $E2, $66, $68, $FE, $61, $F4   ; $59C7
    db   $A1, $82, $E2, $65, $67, $FE, $E2, $66   ; $59CF
    db   $68, $FE, $FE, $FE, $FE, $05, $6A, $6B   ; $59D7
    db   $6A, $6B, $69, $D3, $6A, $6B, $6A, $FE   ; $59DF
    db   $13, $6A, $6B, $69, $E2, $65, $67, $FE   ; $59E7
    db   $E2, $66, $68, $FE, $FE, $FE, $E2, $65   ; $59EF
    db   $67, $FE, $E2, $66, $68, $FE, $E2, $65   ; $59F7
    db   $67, $FE, $E2, $66, $68, $FE, $FE, $FE   ; $59FF
    db   $12, $63, $69, $91, $F4, $B1, $63, $FE   ; $5A07
    db   $02, $63, $64, $91, $F4, $B1, $64, $FE   ; $5A0F
    db   $03, $64, $6A, $69, $91, $F4, $B1, $63   ; $5A17
    db   $FE, $03, $63, $63, $69, $91, $F4, $B1   ; $5A1F
    db   $64, $FE, $03, $64, $64, $69, $FE, $1F   ; $5A27
    db   $FD, $5D, $FE, $1F, $FD, $5D, $FE, $1F   ; $5A2F
    db   $FD, $5D, $FE, $03, $63, $63, $69, $B1   ; $5A37
    db   $63, $FE, $04, $64, $64, $6A, $69, $71   ; $5A3F
    db   $81, $B1, $64, $FE, $1F, $FD, $5D, $FE   ; $5A47
    db   $1F, $FD, $5D, $FE, $03, $6A, $6B, $69   ; $5A4F
    db   $B2, $63, $69, $FE, $B2, $64, $69, $FE   ; $5A57
    db   $B2, $63, $69, $FE, $B3, $64, $6A, $69   ; $5A5F
    db   $FE, $B2, $6A, $69, $FE, $B4, $6A, $6B   ; $5A67
    db   $6A, $69, $FE, $B3, $6A, $6B, $69, $FE   ; $5A6F
    db   $B2, $63, $69, $FE, $B2, $64, $69, $FE   ; $5A77
    db   $B3, $6A, $6B, $69, $FE, $13, $6A, $6B   ; $5A7F
    db   $69, $FE, $03, $63, $63, $69, $FE, $03   ; $5A87
    db   $64, $64, $69, $A2, $6A, $69, $FE, $03   ; $5A8F
    db   $6A, $6B, $69, $A3, $6A, $6B, $69, $FE   ; $5A97
    db   $03, $6A, $6B, $69, $FE, $03, $63, $6A   ; $5A9F
    db   $6B, $FE, $02, $64, $69, $A3, $6A, $6B   ; $5AA7
    db   $69, $FE, $03, $6A, $6B, $69, $A5, $6A   ; $5AAF
    db   $6B, $6A, $6B, $69, $FE, $1F, $FD, $5D   ; $5AB7
    db   $FE, $1F, $5D, $5D, $5D, $5D, $5D, $5D   ; $5ABF
    db   $5D, $6A, $6B, $6A, $6B, $6A, $69, $5D   ; $5AC7
    db   $5D, $FE, $1F, $5D, $5D, $5D, $5D, $5D   ; $5ACF
    db   $5D, $5D, $6A, $6B, $6A, $6B, $6A, $69   ; $5AD7
    db   $5D, $5D, $FE, $1F, $5D, $5D, $5D, $5D   ; $5ADF
    db   $5D, $5D, $5D, $5D, $5D, $5D, $ED, $6A   ; $5AE7
    db   $69, $5D, $5D, $FE, $1F, $5D, $5D, $5D   ; $5AEF
    db   $5D, $5D, $5D, $5D, $5D, $5D, $5D, $ED   ; $5AF7
    db   $6A, $69, $5D, $5D, $FE, $1F, $5D, $5D   ; $5AFF
    db   $5D, $5D, $5D, $5D, $5D, $5D, $5D, $5D   ; $5B07
    db   $ED, $6A, $69, $5D, $5D, $FE, $1F, $5D   ; $5B0F
    db   $5D, $5D, $5D, $5D, $5D, $5D, $5D, $5D   ; $5B17
    db   $5D, $ED, $6A, $69, $5D, $5D, $FE, $1F   ; $5B1F
    db   $5D, $5D, $5D, $5D, $5D, $5D, $5D, $5D   ; $5B27
    db   $5D, $5D, $ED, $6A, $69, $5D, $5D, $FE   ; $5B2F
    db   $1F, $5D, $5D, $5D, $5D, $5D, $5D, $5D   ; $5B37
    db   $5D, $5D, $5D, $ED, $6A, $69, $5D, $5D   ; $5B3F
    db   $FE, $1F, $5D, $5D, $5D, $5D, $5D, $5D   ; $5B47
    db   $5D, $5D, $5D, $5D, $ED, $6A, $69, $5D   ; $5B4F
    db   $5D, $FE, $1F, $5D, $5D, $5D, $5D, $5D   ; $5B57
    db   $5D, $5D, $5D, $5D, $5D, $ED, $6A, $69   ; $5B5F
    db   $5D, $5D, $FE, $1F, $5D, $5D, $5D, $5D   ; $5B67
    db   $5D, $5D, $5D, $5D, $5D, $5D, $ED, $6A   ; $5B6F
    db   $69, $5D, $5D, $FE, $1F, $5D, $5D, $5D   ; $5B77
    db   $5D, $5D, $5D, $5D, $5D, $5D, $5D, $ED   ; $5B7F
    db   $6A, $69, $5D, $5D, $FE, $1F, $5D, $5D   ; $5B87
    db   $5D, $5D, $5D, $5D, $5D, $5D, $5D, $5D   ; $5B8F
    db   $ED, $6A, $69, $5D, $5D, $FE, $1F, $5D   ; $5B97
    db   $5D, $5D, $5D, $5D, $5D, $5D, $5D, $5D   ; $5B9F
    db   $5D, $ED, $6A, $69, $5D, $5D, $FE, $1F   ; $5BA7
    db   $FD, $5D, $FE, $1F, $FD, $5D, $FE, $1F   ; $5BAF
    db   $FD, $5D, $FE, $1F, $FD, $5D, $FE, $1F   ; $5BB7
    db   $FD, $5D, $FE, $03, $64, $63, $69, $E2   ; $5BBF
    db   $65, $67, $FE, $04, $63, $64, $6A, $69   ; $5BC7
    db   $E2, $66, $68, $FE, $03, $64, $63, $69   ; $5BCF
    db   $FE, $03, $63, $64, $69, $FE, $02, $64   ; $5BD7
    db   $63, $FE, $03, $63, $64, $69, $FE, $05   ; $5BDF
    db   $64, $63, $6A, $6B, $69, $FE, $04, $63   ; $5BE7
    db   $64, $6A, $69, $FE, $03, $64, $63, $69   ; $5BEF
    db   $FE, $03, $63, $64, $69, $FE, $03, $64   ; $5BF7
    db   $63, $69, $C2, $63, $69, $FE, $05, $63   ; $5BFF
    db   $64, $63, $6A, $69, $C1, $64, $FE, $05   ; $5C07
    db   $64, $63, $64, $6A, $6B, $C2, $63, $69   ; $5C0F
    db   $FE, $04, $63, $64, $6A, $69, $C2, $64   ; $5C17
    db   $69, $FE, $03, $64, $63, $69, $FE, $03   ; $5C1F
    db   $63, $64, $69, $FE, $02, $64, $63, $FE   ; $5C27
    db   $02, $63, $64, $73, $6A, $6B, $69, $FE   ; $5C2F
    db   $02, $64, $69, $76, $63, $6A, $6B, $6A   ; $5C37
    db   $6B, $69, $FE, $02, $6A, $69, $74, $64   ; $5C3F
    db   $6A, $6B, $69, $FE, $1F, $FD, $5D, $FE   ; $5C47
    db   $1F, $FD, $5D, $FE, $1F, $FD, $5D, $FE   ; $5C4F
    db   $1F, $FD, $5D, $FE, $1F, $FD, $5D, $FE   ; $5C57
    db   $1F, $FD, $5D, $FE, $1F, $FD, $5D, $FE   ; $5C5F
    db   $1F, $FD, $5D, $FE, $1F, $5D, $5D, $5D   ; $5C67
    db   $5D, $5D, $5D, $6A, $6B, $69, $5D, $5D   ; $5C6F
    db   $5D, $5D, $5D, $5D, $FE, $1F, $5D, $5D   ; $5C77
    db   $5D, $5D, $5D, $5D, $63, $6A, $6B, $69   ; $5C7F
    db   $5D, $5D, $5D, $5D, $5D, $FE, $1F, $5D   ; $5C87
    db   $5D, $5D, $5D, $5D, $5D, $64, $6A, $69   ; $5C8F
    db   $5D, $5D, $5D, $5D, $5D, $5D, $FE, $1F   ; $5C97
    db   $FD, $5D, $FE, $1F, $FD, $5D, $FE, $1F   ; $5C9F
    db   $FD, $5D, $FE, $1F, $FD, $5D, $FE, $1F   ; $5CA7
    db   $FD, $5D, $FE, $1F, $FD, $5D, $FE, $1F   ; $5CAF
    db   $FD, $5D, $FE, $1F, $FD, $5D, $FE, $1F   ; $5CB7
    db   $FD, $5D, $FE, $00, $FD, $7F, $FE, $E2   ; $5CBF
    db   $FD, $7F, $FE, $E2, $FD, $7F, $FE, $01   ; $5CC7
    db   $7F, $E2, $FD, $7F, $FE, $01, $7F, $E2   ; $5CCF
    db   $FD, $7F, $FE, $01, $7F, $A1, $7F, $E2   ; $5CD7
    db   $FD, $7F, $FE, $01, $7F, $A1, $7F, $E2   ; $5CDF
    db   $FD, $7F, $FE, $01, $7F, $A1, $82, $E2   ; $5CE7
    db   $FD, $7F, $FE, $01, $7F, $A1, $7F, $E2   ; $5CEF
    db   $FD, $7F, $FE, $01, $7F, $A1, $80, $E2   ; $5CF7
    db   $FD, $7F, $FE, $01, $7F, $71, $80, $A2   ; $5CFF
    db   $FD, $7F, $E2, $FD, $7F, $FE, $01, $7F   ; $5D07
    db   $93, $FD, $7F, $E2, $FD, $7F, $FE, $01   ; $5D0F
    db   $7F, $A2, $ED, $7F, $E2, $FD, $7F, $FE   ; $5D17
    db   $01, $7F, $71, $7F, $A2, $ED, $7F, $E2   ; $5D1F
    db   $FD, $7F, $FE, $01, $7F, $A2, $ED, $7F   ; $5D27
    db   $E2, $FD, $7F, $FE, $01, $7F, $41, $7F   ; $5D2F
    db   $93, $FD, $7F, $E2, $FD, $7F, $FE, $01   ; $5D37
    db   $7F, $41, $7F, $66, $F4, $F4, $F4, $F4   ; $5D3F
    db   $F4, $82, $E2, $FD, $7F, $FE, $05, $7F   ; $5D47
    db   $7F, $74, $77, $7F, $66, $F4, $F4, $F4   ; $5D4F
    db   $F4, $F4, $82, $E2, $FD, $7F, $FE, $05   ; $5D57
    db   $7F, $7F, $75, $78, $7F, $66, $F4, $F4   ; $5D5F
    db   $F4, $F4, $F4, $82, $E2, $FD, $7F, $FE   ; $5D67
    db   $00, $72, $72, $76, $79, $7F, $7F, $7F   ; $5D6F
    db   $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F   ; $5D77
    db   $7F, $FE, $FE, $21, $5A, $A1, $5F, $E1   ; $5D7F
    db   $6C, $FE, $2E, $5B, $49, $5E, $5E, $5E   ; $5D87
    db   $5E, $5E, $5E, $5E, $5E, $5E, $5E, $6D   ; $5D8F
    db   $6C, $FE, $21, $5C, $71, $5A, $E2, $6C   ; $5D97
    db   $6D, $FE, $79, $5B, $49, $5E, $5E, $5E   ; $5D9F
    db   $5E, $5E, $6D, $6C, $FE, $71, $5C, $E2   ; $5DA7
    db   $6C, $6D, $FE, $21, $34, $E1, $6D, $FE   ; $5DAF
    db   $12, $31, $35, $FE, $12, $32, $36, $FE   ; $5DB7
    db   $12, $31, $35, $81, $F4, $C4, $70, $72   ; $5DBF
    db   $72, $6C, $FE, $12, $32, $36, $81, $F4   ; $5DC7
    db   $C4, $71, $73, $73, $6D, $FE, $12, $33   ; $5DCF
    db   $37, $FE, $FE, $FE, $C4, $FD, $6E, $FE   ; $5DD7
    db   $C4, $FD, $6E, $FE, $FE, $FE, $C4, $FD   ; $5DDF
    db   $6E, $FE, $81, $F4, $C4, $FD, $6E, $FE   ; $5DE7
    db   $FE, $41, $5A, $61, $5A, $FE, $4C, $5B   ; $5DEF
    db   $49, $5B, $49, $5E, $5E, $5E, $5E, $5E   ; $5DF7
    db   $5E, $5E, $5E, $FE, $41, $5C, $61, $5C   ; $5DFF
    db   $FE, $21, $34, $91, $F4, $FE, $12, $31   ; $5E07
    db   $35, $FE, $12, $32, $36, $91, $F4, $FE   ; $5E0F
    db   $12, $33, $37, $61, $34, $FE, $52, $31   ; $5E17
    db   $35, $91, $F4, $FE, $52, $32, $36, $FE   ; $5E1F
    db   $52, $31, $35, $91, $F4, $FE, $52, $32   ; $5E27
    db   $36, $FE, $52, $33, $37, $FE, $11, $34   ; $5E2F
    db   $FE, $02, $31, $35, $FE, $02, $32, $36   ; $5E37
    db   $B1, $5A, $FE, $02, $31, $35, $B5, $5B   ; $5E3F
    db   $49, $5E, $5E, $5E, $FE, $02, $32, $36   ; $5E47
    db   $B1, $5C, $FE, $02, $33, $37, $FE, $FE   ; $5E4F
    db   $C4, $FD, $6C, $FE, $34, $70, $72, $72   ; $5E57
    db   $6C, $C4, $FD, $6D, $FE, $34, $71, $73   ; $5E5F
    db   $73, $6D, $C4, $FD, $6C, $FE, $C4, $FD   ; $5E67
    db   $6D, $FE, $FE, $11, $34, $E2, $6E, $6C   ; $5E6F
    db   $FE, $02, $31, $35, $A6, $6C, $6C, $6C   ; $5E77
    db   $6C, $6C, $6D, $FE, $02, $32, $36, $A6   ; $5E7F
    db   $6D, $6D, $6D, $6D, $6D, $6C, $FE, $02   ; $5E87
    db   $33, $37, $A6, $6C, $6C, $6C, $6C, $6C   ; $5E8F
    db   $6D, $FE, $A5, $FD, $6D, $FE, $FE, $61   ; $5E97
    db   $5F, $A6, $FD, $6E, $FE, $FE, $A6, $FD   ; $5E9F
    db   $6E, $FE, $31, $34, $FE, $22, $31, $35   ; $5EA7
    db   $A6, $FD, $6E, $FE, $22, $32, $36, $A6   ; $5EAF
    db   $FD, $6E, $FE, $22, $33, $37, $FE, $FE   ; $5EB7
    db   $FE, $D3, $FD, $6C, $FE, $D3, $FD, $6D   ; $5EBF
    db   $FE, $F1, $6C, $FE, $11, $82, $31, $5A   ; $5EC7
    db   $61, $6C, $F1, $6D, $FE, $11, $82, $3D   ; $5ECF
    db   $5B, $49, $5E, $6D, $5E, $5E, $5E, $5E   ; $5ED7
    db   $5E, $5E, $5E, $5E, $6C, $FE, $11, $82   ; $5EDF
    db   $32, $5C, $F4, $61, $6C, $F1, $6D, $FE   ; $5EE7
    db   $11, $82, $41, $F4, $61, $6D, $A1, $81   ; $5EEF
    db   $F1, $6C, $FE, $11, $82, $41, $F4, $61   ; $5EF7
    db   $6C, $A1, $81, $F1, $6D, $FE, $11, $82   ; $5EFF
    db   $41, $F4, $61, $6D, $A1, $81, $F1, $6C   ; $5F07
    db   $FE, $11, $80, $41, $F4, $61, $6C, $A1   ; $5F0F
    db   $81, $F1, $6D, $FE, $11, $82, $41, $F4   ; $5F17
    db   $61, $6D, $B5, $5B, $49, $5E, $5E, $6C   ; $5F1F
    db   $FE, $11, $82, $41, $F4, $61, $6C, $F1   ; $5F27
    db   $6D, $FE, $11, $82, $61, $6D, $F1, $6C   ; $5F2F
    db   $FE, $F1, $6D, $FE, $97, $5B, $58, $5E   ; $5F37
    db   $5E, $5E, $5E, $6C, $FE, $11, $34, $F1   ; $5F3F
    db   $6D, $FE, $02, $31, $35, $D3, $FD, $6C   ; $5F47
    db   $FE, $02, $32, $36, $D3, $FD, $6D, $FE   ; $5F4F
    db   $02, $33, $37, $FE, $FE, $E2, $FD, $6C   ; $5F57
    db   $FE, $11, $34, $E2, $FD, $6D, $FE, $02   ; $5F5F
    db   $31, $35, $C4, $70, $72, $6C, $6E, $FE   ; $5F67
    db   $02, $32, $36, $C4, $71, $73, $6D, $6C   ; $5F6F
    db   $FE, $02, $31, $35, $91, $5F, $E2, $6C   ; $5F77
    db   $6D, $FE, $02, $32, $36, $E2, $6D, $6E   ; $5F7F
    db   $FE, $02, $33, $37, $72, $6C, $5A, $FE   ; $5F87
    db   $79, $6D, $5B, $49, $5E, $5E, $5E, $5E   ; $5F8F
    db   $5E, $5E, $FE, $72, $6C, $5C, $FE, $71   ; $5F97
    db   $6D, $FE, $FE, $FE, $71, $6C, $FE, $71   ; $5F9F
    db   $6D, $FE, $71, $6C, $FE, $21, $5A, $71   ; $5FA7
    db   $6D, $A1, $5A, $FE, $2E, $5B, $58, $5E   ; $5FAF
    db   $5E, $5E, $5E, $5E, $5E, $57, $58, $5E   ; $5FB7
    db   $5B, $49, $5E, $FE, $21, $5C, $A1, $5C   ; $5FBF
    db   $FE, $D1, $6C, $FE, $D1, $6D, $FE, $A4   ; $5FC7
    db   $FD, $6C, $FE, $21, $F4, $41, $F4, $61   ; $5FCF
    db   $F4, $81, $F4, $A4, $FD, $6D, $FE, $FE   ; $5FD7
    db   $FE, $0C, $6C, $6E, $6E, $6E, $6E, $6E   ; $5FDF
    db   $6E, $6E, $6E, $6E, $6C, $6E, $FE, $01   ; $5FE7
    db   $6D, $A1, $6D, $FE, $01, $6C, $61, $6C   ; $5FEF
    db   $FE, $01, $6D, $61, $6D, $FE, $01, $6C   ; $5FF7
    db   $68, $FD, $6E, $FE, $01, $6D, $FE, $08   ; $5FFF
    db   $6C, $6E, $6E, $6E, $6E, $6E, $6E, $6E   ; $6007
    db   $FE, $01, $6D, $71, $6C, $FE, $01, $6C   ; $600F
    db   $71, $6D, $FE, $01, $6D, $31, $6C, $B4   ; $6017
    db   $FD, $6C, $FE, $01, $6C, $3C, $6D, $6E   ; $601F
    db   $6E, $6E, $6E, $6E, $6E, $6E, $6D, $6D   ; $6027
    db   $6D, $6D, $FE, $01, $6D, $E1, $6C, $FE   ; $602F
    db   $01, $6C, $E1, $6D, $FE, $08, $6D, $6E   ; $6037
    db   $6E, $6E, $6E, $6E, $6E, $6E, $E1, $6C   ; $603F
    db   $FE, $E1, $6D, $FE, $E1, $6E, $FE, $03   ; $6047
    db   $6C, $55, $56, $E2, $6C, $6E, $FE, $03   ; $604F
    db   $6D, $55, $5A, $61, $5A, $E2, $6D, $6E   ; $6057
    db   $FE, $00, $6C, $55, $5B, $49, $5E, $5E   ; $605F
    db   $57, $58, $5E, $5E, $5E, $5E, $5E, $5E   ; $6067
    db   $6C, $6E, $FE, $03, $6D, $55, $5C, $61   ; $606F
    db   $5C, $E2, $6D, $6C, $FE, $03, $6C, $55   ; $6077
    db   $56, $E2, $6C, $6D, $FE, $03, $6D, $55   ; $607F
    db   $56, $51, $50, $E2, $6D, $6E, $FE, $00   ; $6087
    db   $6C, $55, $56, $4C, $4E, $51, $59, $59   ; $608F
    db   $59, $59, $59, $59, $59, $53, $6C, $6E   ; $6097
    db   $FE, $06, $6D, $55, $56, $4D, $4F, $52   ; $609F
    db   $D3, $54, $6D, $6C, $FE, $03, $6C, $55   ; $60A7
    db   $56, $E2, $6C, $6D, $FE, $03, $6D, $55   ; $60AF
    db   $56, $E2, $6D, $6E, $FE, $03, $6C, $55   ; $60B7
    db   $56, $51, $50, $E2, $6C, $6E, $FE, $00   ; $60BF
    db   $6D, $55, $56, $4C, $4E, $51, $59, $59   ; $60C7
    db   $59, $59, $59, $59, $59, $53, $6D, $6C   ; $60CF
    db   $FE, $06, $6C, $55, $56, $4D, $4F, $52   ; $60D7
    db   $D3, $54, $6C, $6D, $FE, $03, $6D, $55   ; $60DF
    db   $56, $E2, $6D, $6E, $FE, $03, $6C, $55   ; $60E7
    db   $56, $A6, $6C, $6E, $6C, $6E, $6C, $6E   ; $60EF
    db   $FE, $03, $6D, $55, $56, $A6, $6D, $6C   ; $60F7
    db   $6D, $6C, $6D, $6C, $FE, $00, $6C, $55   ; $60FF
    db   $5D, $5D, $5D, $5D, $5D, $5D, $5D, $5D   ; $6107
    db   $6C, $6D, $6C, $6D, $6C, $6D, $FE, $00   ; $610F
    db   $6D, $55, $5D, $5D, $5D, $5D, $5D, $5D   ; $6117
    db   $5D, $5D, $6D, $6E, $6D, $6E, $6D, $6E   ; $611F
    db   $FE, $00, $6C, $55, $5D, $5D, $5D, $5D   ; $6127
    db   $5D, $5D, $5D, $5D, $6C, $6C, $6C, $6C   ; $612F
    db   $6C, $6C, $FE, $03, $6D, $55, $56, $A6   ; $6137
    db   $FD, $6D, $FE, $03, $6C, $55, $56, $D3   ; $613F
    db   $6E, $6C, $6E, $FE, $08, $6D, $55, $56   ; $6147
    db   $3A, $3D, $40, $43, $50, $E2, $6D, $6C   ; $614F
    db   $FE, $00, $6C, $55, $38, $3B, $3E, $41   ; $6157
    db   $44, $51, $59, $59, $59, $59, $59, $53   ; $615F
    db   $6C, $6D, $FE, $08, $6D, $55, $39, $3C   ; $6167
    db   $3F, $42, $45, $52, $A1, $81, $D3, $54   ; $616F
    db   $6D, $6E, $FE, $03, $6C, $55, $56, $A1   ; $6177
    db   $81, $E2, $FD, $6C, $FE, $03, $6D, $55   ; $617F
    db   $56, $A1, $81, $E2, $FD, $6D, $FE, $03   ; $6187
    db   $6C, $55, $56, $E2, $6C, $6E, $FE, $03   ; $618F
    db   $6D, $55, $56, $E2, $6D, $6C, $FE, $03   ; $6197
    db   $6C, $55, $56, $71, $50, $E2, $6C, $6D   ; $619F
    db   $FE, $03, $6D, $55, $56, $5B, $4C, $4E   ; $61A7
    db   $51, $59, $59, $59, $59, $59, $53, $6D   ; $61AF
    db   $6E, $FE, $03, $6C, $55, $56, $53, $4D   ; $61B7
    db   $4F, $52, $D3, $54, $6C, $6C, $FE, $03   ; $61BF
    db   $6D, $55, $56, $D3, $6C, $6D, $6D, $FE   ; $61C7
    db   $03, $6C, $55, $56, $C2, $6C, $6D, $FE   ; $61CF
    db   $03, $6D, $55, $56, $B2, $6C, $6D, $FE   ; $61D7
    db   $03, $6C, $55, $56, $A2, $6C, $6D, $FE   ; $61DF
    db   $03, $6D, $55, $56, $92, $6C, $6D, $FE   ; $61E7
    db   $03, $6C, $55, $56, $91, $6D, $FE, $03   ; $61EF
    db   $6D, $55, $56, $FE, $03, $6C, $55, $56   ; $61F7
    db   $FE, $03, $6D, $55, $56, $FE, $1F, $FD   ; $61FF
    db   $5D, $FE, $1F, $FD, $5D, $FE, $02, $6C   ; $6207
    db   $6E, $D3, $FD, $6C, $FE, $02, $6D, $6C   ; $620F
    db   $D3, $FD, $6D, $FE, $02, $6C, $6D, $51   ; $6217
    db   $50, $D3, $6E, $6C, $6C, $FE, $02, $6D   ; $621F
    db   $6C, $3D, $4C, $4E, $51, $59, $59, $59   ; $6227
    db   $59, $59, $59, $59, $53, $6D, $6D, $FE   ; $622F
    db   $02, $6C, $6D, $33, $4D, $4F, $52, $D3   ; $6237
    db   $54, $6C, $6C, $FE, $01, $6D, $E2, $FD   ; $623F
    db   $6D, $FE, $01, $6E, $E2, $FD, $6E, $FE   ; $6247
    db   $1F, $FD, $5D, $FE, $1F, $FD, $5D, $FE   ; $624F
    db   $1F, $FD, $5D, $FE, $01, $6C, $D3, $FD   ; $6257
    db   $6C, $FE, $01, $6D, $41, $50, $D3, $FD   ; $625F
    db   $6D, $FE, $01, $6C, $26, $4C, $4E, $51   ; $6267
    db   $59, $53, $6C, $D3, $FD, $6C, $FE, $01   ; $626F
    db   $6D, $23, $4D, $4F, $52, $65, $54, $6D   ; $6277
    db   $6E, $6E, $6E, $D3, $FD, $6D, $FE, $01   ; $627F
    db   $6C, $D3, $FD, $6C, $FE, $06, $6D, $6C   ; $6287
    db   $6E, $6C, $6E, $6C, $97, $E1, $6E, $6E   ; $628F
    db   $6E, $6D, $6D, $6D, $FE, $00, $6C, $6D   ; $6297
    db   $6C, $6D, $6C, $6D, $EC, $EC, $EC, $EC   ; $629F
    db   $6C, $6C, $6C, $6C, $6C, $6C, $FE, $06   ; $62A7
    db   $6D, $6E, $6D, $6E, $6D, $6E, $A6, $FD   ; $62AF
    db   $6D, $FE, $A6, $63, $63, $63, $63, $60   ; $62B7
    db   $60, $FE, $A6, $64, $64, $64, $64, $61   ; $62BF
    db   $61, $FE, $E2, $ED, $60, $FE, $E2, $ED   ; $62C7
    db   $61, $FE, $E2, $ED, $60, $FE, $21, $34   ; $62CF
    db   $E2, $ED, $61, $FE, $12, $31, $35, $E2   ; $62D7
    db   $ED, $60, $FE, $12, $32, $36, $E2, $ED   ; $62DF
    db   $61, $FE, $12, $31, $35, $E2, $ED, $60   ; $62E7
    db   $FE, $12, $32, $36, $B5, $3A, $3D, $40   ; $62EF
    db   $ED, $61, $FE, $12, $33, $37, $A6, $38   ; $62F7
    db   $3B, $3E, $41, $ED, $60, $FE, $A6, $39   ; $62FF
    db   $3C, $3F, $42, $ED, $61, $FE, $E2, $ED   ; $6307
    db   $60, $FE, $A6, $3A, $3D, $40, $43, $ED   ; $630F
    db   $61, $FE, $97, $38, $3B, $3E, $41, $44   ; $6317
    db   $ED, $60, $FE, $97, $39, $3C, $3F, $42   ; $631F
    db   $45, $ED, $61, $FE, $E2, $ED, $60, $FE   ; $6327
    db   $E2, $ED, $61, $FE, $E2, $ED, $60, $FE   ; $632F
    db   $E2, $ED, $61, $FE, $E2, $ED, $60, $FE   ; $6337
    db   $E2, $ED, $61, $FE, $43, $FD, $F4, $82   ; $633F
    db   $FD, $63, $D3, $63, $60, $60, $FE, $43   ; $6347
    db   $FD, $F4, $82, $FD, $64, $D3, $64, $61   ; $634F
    db   $61, $FE, $43, $FD, $F4, $82, $6A, $6B   ; $6357
    db   $E2, $FD, $60, $FE, $E2, $FD, $61, $FE   ; $635F
    db   $D3, $63, $60, $60, $FE, $21, $34, $D3   ; $6367
    db   $64, $61, $61, $FE, $12, $31, $35, $E2   ; $636F
    db   $ED, $60, $FE, $12, $32, $36, $E2, $ED   ; $6377
    db   $61, $FE, $12, $33, $37, $D3, $63, $60   ; $637F
    db   $60, $FE, $D3, $64, $61, $61, $FE, $E2   ; $6387
    db   $ED, $60, $FE, $E2, $ED, $61, $FE, $D3   ; $638F
    db   $63, $60, $60, $FE, $D3, $64, $61, $61   ; $6397
    db   $FE, $E2, $ED, $60, $FE, $E2, $ED, $61   ; $639F
    db   $FE, $D3, $63, $60, $60, $FE, $D3, $64   ; $63A7
    db   $61, $61, $FE, $E2, $ED, $60, $FE, $E2   ; $63AF
    db   $ED, $61, $FE, $81, $63, $E2, $ED, $60   ; $63B7
    db   $FE, $81, $64, $E2, $ED, $61, $FE, $72   ; $63BF
    db   $FD, $63, $E2, $ED, $60, $FE, $72, $FD   ; $63C7
    db   $64, $E2, $ED, $61, $FE, $E2, $ED, $60   ; $63CF
    db   $FE, $21, $34, $E2, $ED, $61, $FE, $12   ; $63D7
    db   $31, $35, $E2, $ED, $60, $FE, $12, $32   ; $63DF
    db   $36, $E2, $ED, $61, $FE, $12, $33, $37   ; $63E7
    db   $E2, $ED, $60, $FE, $E2, $ED, $61, $FE   ; $63EF
    db   $E2, $ED, $60, $FE, $E2, $ED, $61, $FE   ; $63F7
    db   $E2, $ED, $60, $FE, $E2, $ED, $61, $FE   ; $63FF
    db   $E2, $ED, $60, $FE, $E2, $ED, $61, $FE   ; $6407
    db   $E2, $ED, $60, $FE, $E2, $ED, $61, $FE   ; $640F
    db   $FD, $00, $28, $10, $0A, $11, $0B, $10   ; $6417
    db   $25, $11, $11, $10, $11, $11, $08, $10   ; $641F
    db   $04, $00, $1C, $10, $04, $11, $04, $01   ; $6427
    db   $03, $00, $1F, $10, $02, $11, $0D, $10   ; $642F
    db   $07, $00, $2F, $10, $01, $11, $0D, $10   ; $6437
    db   $04, $00, $1D, $01, $0C, $00, $59, $10   ; $643F
    db   $03, $11, $0F, $00, $1F, $20, $0A, $00   ; $6447
    db   $22, $10, $00, $11, $16, $10, $3D, $11   ; $644F
    db   $1A, $10, $00, $00, $1B, $10, $2F, $11   ; $6457
    db   $0F, $01, $01, $00, $29, $10, $04, $11   ; $645F
    db   $0D, $10, $0A, $00, $40, $01, $0C, $21   ; $6467
    db   $01, $20, $08, $00, $29, $20, $17, $00   ; $646F
    db   $47, $10, $17, $11, $18, $10, $1A, $00   ; $6477
    db   $12, $10, $07, $11, $0C, $10, $01, $00   ; $647F
    db   $15, $10, $09, $11, $0B, $10, $20, $00   ; $6487
    db   $1D, $01, $01, $00, $00, $00, $00, $00   ; $648F
    db   $00, $FF, $FD, $00, $26, $10, $03, $11   ; $6497
    db   $0D, $10, $09, $00, $08, $10, $0C, $11   ; $649F
    db   $0D, $10, $0A, $00, $18, $10, $04, $11   ; $64A7
    db   $0B, $10, $04, $00, $22, $10, $01, $11   ; $64AF
    db   $11, $10, $02, $00, $3D, $10, $08, $11   ; $64B7
    db   $0C, $10, $0D, $00, $70, $01, $05, $11   ; $64BF
    db   $07, $10, $04, $00, $20, $10, $0D, $11   ; $64C7
    db   $1C, $10, $1A, $00, $25, $01, $10, $11   ; $64CF
    db   $05, $10, $06, $00, $2C, $10, $03, $11   ; $64D7
    db   $11, $10, $0E, $00, $26, $10, $10, $11   ; $64DF
    db   $17, $10, $03, $00, $14, $01, $0D, $00   ; $64E7
    db   $1B, $10, $0A, $00, $2A, $11, $0D, $10   ; $64EF
    db   $03, $00, $0E, $20, $06, $00, $1A, $10   ; $64F7
    db   $03, $11, $09, $10, $08, $00, $17, $10   ; $64FF
    db   $08, $01, $05, $11, $04, $00, $14, $20   ; $6507
    db   $06, $00, $98, $01, $09, $11, $06, $10   ; $650F
    db   $02, $00, $2D, $F7, $5F, $CA, $50, $D6   ; $6517
    db   $50, $D7, $50, $E4, $50, $F1, $50, $FD   ; $651F
    db   $50, $FE, $50, $0B, $51, $18, $51, $25   ; $6527
    db   $51, $32, $51, $3E, $51, $3E, $51, $3F   ; $652F
    db   $51, $4F, $51, $5C, $51, $75, $51, $91   ; $6537
    db   $51, $A7, $51, $B7, $51, $C4, $51, $D7   ; $653F
    db   $51, $EA, $51, $06, $52, $19, $52, $2B   ; $6547
    db   $52, $00, $41, $01, $07, $00, $18, $10   ; $654F
    db   $5B, $11, $0A, $10, $07, $00, $4B, $01   ; $6557
    db   $0A, $00, $2D, $10, $14, $00, $76, $10   ; $655F
    db   $01, $11, $10, $10, $24, $11, $0B, $10   ; $6567
    db   $00, $00, $2B, $01, $0F, $00, $2C, $10   ; $656F
    db   $1F, $11, $0B, $10, $27, $11, $01, $01   ; $6577
    db   $09, $00, $20, $10, $5D, $11, $14, $10   ; $657F
    db   $19, $00, $27, $10, $0A, $11, $06, $10   ; $6587
    db   $2A, $00, $51, $10, $0E, $11, $06, $10   ; $658F
    db   $02, $00, $63, $01, $0F, $11, $07, $10   ; $6597
    db   $06, $FF, $DF, $FF, $7F, $FF, $F5, $FF   ; $659F
    db   $F7, $FF, $F7, $FF, $F5, $FF, $FF, $FF   ; $65A7
    db   $FF, $FF, $DF, $FF, $FF, $FF, $FF, $FF   ; $65AF
    db   $FF, $FF, $FF, $FF, $FF, $FF, $F7, $FF   ; $65B7
    db   $F7, $FF, $F5, $FF, $DF, $FF, $FF, $FF   ; $65BF
    db   $7F, $FF, $DF, $FF, $5D, $FF, $7F, $FF   ; $65C7
    db   $F7, $FF, $DD, $FF, $F7, $FF, $FF, $FF   ; $65CF
    db   $FF, $FF, $3F, $FF, $7F, $FF, $F7, $FF   ; $65D7
    db   $7F, $AF, $77, $FF, $75, $FF, $FF, $FF   ; $65DF
    db   $FF, $FF, $7F, $FF, $FD, $FF, $DF, $FF   ; $65E7
    db   $FF, $FF, $FF, $FF, $FF, $FF, $F7, $FF   ; $65EF
    db   $FF, $FF, $DF, $FF, $FF, $FF, $DF, $FF   ; $65F7
    db   $DF                                      ; $65FF

Data_6600
	dw StartJumpSFX
	dw StartSuperballSFX
	dw StartStompSFX
	dw StartGrowSFX
	dw StartCoinSFX
	dw StartInjurySFX
	dw StartBumpSFX
	dw StartOneUpSFX
	dw StartGiraSFX
	dw StartTimerTickSFX
	dw StartFlowerSFX

Data_6616
	dw ContinueJumpSFX
	dw ContinueSquareSFX
	dw ContinueStompSFX
	dw ContinueSweepSquareSFX
	dw ContinueCoinSFX
	dw ContinueInjurySFX
	dw ContinueSquareSFX
	dw ContinueOneUpSFX
	dw ContinueSquareSFX
	dw ContinueSquareSFX
	dw ContinueSweepSquareSFX

Data_662C
	dw StartExplosionSFX
	dw StartBrickShatterSFX
	dw StartDeathCrySFX
	dw StartFireBreathSFX
Data_6634
	dw ContinueNoiseSFX
	dw ContinueNoiseSFX
	dw ContinueDeathCrySFX
	dw ContinueNoiseSFX

; dump_music.py
Data_663C
	dw Song_6F98	; 1
	dw Song_6FA3
	dw Song_6FAE
	dw Song_6FB9
	dw Song_6FC4	; 5
	dw Song_6FCF
	dw Song_6FDA
	dw Song_6FE5
	dw Song_78DC
	dw Song_78E7	; 10
	dw Song_78F2
	dw Song_78FD
	dw Song_7908
	dw Song_7913
	dw Song_791E	; 15
	dw Song_7929
	dw Song_7D6A
	dw Song_7934
	dw Song_793F	; 19

_Call_7FF0:: ; 6662
	push af
	push bc
	push de
	push hl
	ld a, $03		; Cartridge doesn't have RAM, and it's not even the correct
	ld [$00FF], a	; way to enable it. Bug
	ei				; Is this smart
	ldh a, [hPauseUnpauseMusic]
	cp a, $01		; 1 means pause music
	jr z, .pauseMusic
	cp a, $02		; 2 means unpause music
	jr z, .unpauseMusic
	ldh a, [hPauseTuneTimer]
	and a
	jr nz, .soundPaused
	ld c, $D3
	ld a, [$FF00+c]	; ?? To override other SFXs?
	and a
	jr z, .jmp_6688
	xor a
	ld [$FF00+c], a
	ld a, $08		; 1UP sound
	ld [$DFE0], a
.jmp_6688
	call PlaySquareSFX
	call PlayNoiseSFX	; play noise sfx
	call PlayWaveSFX	; play wave sfx
	call StartMusic
	call PlayMusic
	call PanStereo
.out
	xor a
	ld [$DFE0], a
	ld [$DFE8], a
	ld [$DFF0], a
	ld [$DFF8], a
	ldh [hPauseUnpauseMusic], a
	ld a, $07
	ld [$00FF], a	; Bug continued
	pop hl
	pop de
	pop bc
	pop af
	reti			; Interrupts are already enabled, necessary? Maybe to alert
					; peripherals to reset their interrupt flags
.pauseMusic
	call _InitSound.muteChannels
	xor a
	ld [$DFE1], a
	ld [$DFF1], a
	ld [$DFF9], a
	ld a, $30
	ldh [hPauseTuneTimer], a
.playFirstNote
	ld hl, .pauseFirstNoteData
.playNote
	call SetupChannel.square2
	jr .out

.playSecondNote
	ld hl, .pauseSecondNoteData
	jr .playNote

.unpauseMusic
	xor a
	ldh [hPauseTuneTimer], a
	jr .jmp_6688

.soundPaused
	ld hl, hPauseTuneTimer
	dec [hl]
	ld a, [hl]
	cp a, $28				; Continue pause tune if it's still running
	jr z, .playSecondNote
	cp a, $20
	jr z, .playFirstNote
	cp a, $18
	jr z, .playSecondNote
	cp a, $10
	jr nz, .out
	inc [hl]				; Keep the hPauseTuneTimer non-zero, keeps the music
	jr .out					; paused

.pauseFirstNoteData
	db $B2, $E3, $83, $C7	; 1048.6 Hz ~ C6
.pauseSecondNoteData
	db $B2, $E3, $C1, $C7	; 2080.5 Hz ~ C7

PlayWaveSFX:: ; 66F6
	ld a, [$DFF0]	; SFX channel, only has boss cry
	cp a, $01
	jr z, .startBossCry
	ld a, [$DFF1]
	cp a, $01
	jr z, .continueBossCry
	ret

.bossCryChannelData
	db $80, $3A, $20, $B0, $C6	; 198/256 seconds, full volume, ~195 Hz (~G3)

.startBossCry
	ld [$DFF1], a
	ld hl, $DF3F
	set 7, [hl]			; stops the music from using the Wave channel?
	xor a
	ld [$DFF4], a
	ldh [rNR30], a		; wave DAC power
	ld hl, BossCryWavePattern
	call SetupWavePattern
	ldh a, [rDIV]		; supposedly random, but because the music code is
	and a, $1F			; linked to the timer interrupt, rDIV might always be 1
	ld b, a				; here? Bug?
	ld a, $D0
	add b
	ld [$DFF5], a		; "random" number from D0 to FF (always ~D1?)
	ld hl, .bossCryChannelData
	jp SetupChannel.wave	; copy HL to wave registers

.continueBossCry
	ldh a, [rDIV]
	and a, $07
	ld b, a				; "random" number from 0 to 7 (always ~2?)
	ld hl, $DFF4
	inc [hl]
	ld a, [hl]
	ld hl, $DFF5
	cp a, $0E
	jr nc, .lowerFreq
	inc [hl]
	inc [hl]
.writeFreq
	ld a, [hl]
	and a, $F8			; put a "random" number in the low nibble
	or b
	ld c, LOW(rNR33)	; modulate frequency
	ld [$FF00+c], a
	ret

.lowerFreq
	cp a, $1E
	jr z, .stopBossCry
	dec [hl]
	dec [hl]
	dec [hl]
	jr .writeFreq

.stopBossCry
	xor a
	ld [$DFF1], a
	ldh [rNR30], a
	ld hl, $DF3F
	res 7, [hl]			; release wave channel?
	ld bc, $DF36
	ld a, [bc]
	ld l, a
	inc c
	ld a, [bc]
	ld h, a
	jp SetupWavePattern

; no sweep, 50% duty, 1/16 second, envelope?, 1024 Hz, trigger, counter mode
TimerTickChannelData:: ; 6769
	db $00, $B0, $53, $80, $C7

StartTimerTickSFX:: ; 676E
	ld a, $03
	ld hl, TimerTickChannelData
	jp Jmp_69C6

GiraChannelData:: ; 6776
	db $3C, $80, $A0, $50, $84 ; 138.9 Hz, C#3

StartGiraSFX:: ; 677B
	call Call_6791.jmp_679C
	ret z
	ld a, $0E
	ld hl, GiraChannelData
	jp Jmp_69C6

JumpChannelData:: ; 6787
	db $00, $80, $D2, $0A, $86 ; 261.1 Hz C4

; Superball?
SuperballChannelData:: ; 678C
	db $3D, $80, $A3, $09, $87 ; 530.7 Hz ~ C5 (24 cents off...)

; used to check if new SFX overrides the one currently playing
Call_6791:: ; 6791
	ld a, [$DFE1]
	jr .jmp_67A2 ; WTF is this bullshit

.jmp_6796
	ld a, [$DFE1]
	cp a, SFX_STOMP
	ret z
.jmp_679C
	ld a, [$DFE1]
	cp a, SFX_COIN
	ret z
.jmp_67A2
	cp a, SFX_GROW
	ret z
	cp a, SFX_INJURY
	ret z
	cp a, SFX_1UP
	ret z
	cp a, SFX_FLOWER
	ret z
	ret

StartJumpSFX:: ; 67AF
	call Call_6791.jmp_6796
	ret z
	ld a, $10
	ld hl, JumpChannelData
	call Jmp_69C6
	ld hl, $DFE4
	ld [hl], $0A
	inc l
	ld [hl], $86
	ret

ContinueJumpSFX:: ; 67C4
	call updateSoundProgress
	and a
	jp z, ContinueSquareSFX.stop
	ld hl, $DFE4
	ld e, [hl]
	inc l
	ld d, [hl]
	push hl
	ld hl, $000F		; some sort of sweep implementation
	add hl, de
	ld c, LOW(rNR13)
	ld a, l
	ld [$FF00+c], a
	ld b, a
	inc c
	ld a, h
	and a, $3F
	ld [$FF00+c], a		; rNR14
	pop hl
	ldd [hl], a
	ld [hl], b
	ret

StartSuperballSFX:: ; 67E4
	call Call_6791.jmp_6796
	ret z
	ld a, $03
	ld hl, SuperballChannelData
	jp Jmp_69C6

ContinueSquareSFX
	call updateSoundProgress
	and a
	ret nz
.stop
	xor a
	ld [$DFE1], a
	ldh [rNR10], a
	ld a, $08
	ldh [rNR12], a
	ld a, $80
	ldh [rNR14], a
	ld hl, $DF1F
	res 7, [hl]				; unlock
	ret

CoinChannelData1::
	db $00, $80, $E2, $06, $87 ; 524.3 Hz ~ C5
CoinChannelData2::
	db $00, $80, $E2, $83, $87 ; 1049 Hz ~ C6

StartCoinSFX:: ; 6813
	call Call_6791
	ret z
	ld hl, CoinChannelData1
	jp Jmp_69C6

ContinueCoinSFX:: ; 681D
	ld hl, $DFE4
	inc [hl]
	ld a, [hl]
	cp a, $04
	jr z, .secondTone
	cp a, $18
	jp z, ContinueSquareSFX.stop
	ret

.secondTone
	ld hl, CoinChannelData2
	call SetupChannel.square1
	ret

StompChannelData1::
	db $57, $96, $8C, $30, $C7 ; 630 Hz
StompChannelData2::
	db $57, $96, $8C, $35, $C7 ; 645 Hz

StartStompSFX:: ; 683D
	call Call_6791.jmp_679C
	ret z
	ld a, $08
	ld hl, StompChannelData1
	jp Jmp_69C6

ContinueStompSFX:: ; 6849
	call updateSoundProgress
	and a
	ret nz
	ld hl, $DFE4
	ld a, [hl]
	inc [hl]
	cp a, $00
	jr z, .jmp_685D
	cp a, $01
	jp z, ContinueSquareSFX.stop
	ret

.jmp_685D
	ld hl, StompChannelData2
	jp SetupChannel.square1

FlowerChannelData:: ; 6863
	db $54, $00, $9A, $20, $87 ; 585.1 Hz ~ D5 (though 721 is closer)

StartFlowerSFX:: ; 6868
	ld a, $60
	ld [$DFE6], a
	ld a, $05
	ld hl, FlowerChannelData
	jp Jmp_69C6

GrowChannelData
	db $27, $80, $8A, $10, $86 ; 264.3 Hz ~ C4 (17 cents off though)

StartGrowSFX:: ; 687A
	ld a, $10
	ld [$DFE6], a
	ld a, $05
	ld hl, GrowChannelData
	jp Jmp_69C6

ContinueSweepSquareSFX::
	call updateSoundProgress
	and a
	ret nz
	ld hl, $DFE6
	ld a, $10				; sweep frequency up
	add [hl]
	ld [hl], a
	cp a, $E0
	jp z, ContinueSquareSFX.stop
	ld c, LOW(rNR13)
	ld [$FF00+c], a
	inc c
	ld a, $86
	ld [$FF00+c], a			; rNR14
	ret

BumpChannelData:: ; 
	db $2C, $80, $D3, $40, $84 ; 136.5 Hz

StartBumpSFX:: ; 68A5
	call Call_6791.jmp_679C
	ret z
	ld a, $08
	ld hl, BumpChannelData
	jp Jmp_69C6

InjuryChannelData::
	db $3A, $80, $E3, $20, $86 ; 273.1 Hz (one octave above the bump thing?)
InjuryEnvelopeData
	db $F3, $B3, $A3, $93, $83, $73, $63, $53, $43, $33, $23, $23, $13, $00

StartInjurySFX::
	ld a, [$DFE1]
	cp a, SFX_1UP
	ret z
	ld a, $06
	ld hl, InjuryChannelData
	jp Jmp_69C6

ContinueInjurySFX::
	call updateSoundProgress
	and a
	ret nz
	ld hl, $DFE4
	ld c, [hl]
	inc [hl]
	ld b, $00
	ld hl, InjuryEnvelopeData
	add hl, bc
	ld a, [hl]
	and a
	jp z, ContinueSquareSFX.stop
	ld c, LOW(rNR12)
	ld [$FF00+c], a
	inc c
	inc c
	ld a, $87			; 609.6 Hz? Trigger
	ld [$FF00+c], a		; rNR14
	ret

StartOneUpSFX::
	ld a, $06
	ld hl, OneUpNote1
	jp Jmp_69C6

; Pentatonic riff. CDEGC'A in C major
OneUpNote1::
	db $00, $30, $F0, $A7, $C7 ; 1472 Hz ~ F#6
OneUpNote2::
	db $00, $30, $F0, $B1, $C7 ; 1659 Hz ~ G#6
OneUpNote3::
	db $00, $30, $F0, $BA, $C7 ; 1872 Hz ~ A#6
OneUpNote4::
	db $00, $30, $F0, $C4, $C7 ; 2184 Hz ~ C#7 (25 cents flat, bug, 7C5 is closer)
OneUpNote5::
	db $00, $30, $F0, $D4, $C7 ; 2978 Hz ~ F#7 (11 cents sharp)
OneUpNote6::
	db $00, $30, $F0, $CB, $C7 ; 2473 Hz ~ D#7 (11 cents flat)

ContinueOneUpSFX:: ; 6916
	call updateSoundProgress
	and a
	ret nz
	ld a, [$DFE4]		; when sound has ended, increment and load a new note
	inc a
	ld [$DFE4], a
	cp a, $01
	jr z, .playNote2
	cp a, $02
	jr z, .playNote3
	cp a, $03
	jr z, .playNote4
	cp a, $04
	jr z, .playNote5
	cp a, $05
	jr z, .playNote6
	jp ContinueSquareSFX.stop

.playNote2
	ld hl, OneUpNote2
	jr .playNote

.playNote3
	ld hl, OneUpNote3
	jr .playNote

.playNote4
	ld hl, OneUpNote4
	jr .playNote

.playNote5
	ld hl, OneUpNote5
	jr .playNote

.playNote6
	ld hl, OneUpNote6
.playNote
	jp SetupChannel.square1

ExplosionChannelData:: ; 6953
	db $00, $F4, $57, $80

StartExplosionSFX:: ; 6957
	ld a, $30
	ld hl, ExplosionChannelData
	jp Jmp_69C6

Call_695F:: ; 695F
	ld a, [$DFF9]
	cp a, SFX_EXPLOSION
	ret z
	ret

DeathCryChannelData:: ; 6966
	db $00, $2C, $1E, $80

; Death cry envelope of sorts? TODO
; first nibble: clock shift, increasing, 
; second nibble: width (always narrow), divisor code
Data_696A:: ; 696A
	db $1F, $2D, $2F, $3D, $3F, $00

StartDeathCrySFX:: ; 6970
	call Call_695F
	ret z
	ld a, $06
	ld hl, DeathCryChannelData
	jp Jmp_69C6

ContinueDeathCrySFX:: ; 697C
	call updateSoundProgress
	and a
	ret nz
	ld hl, $DFFC
	ld c, [hl]
	inc [hl]
	ld b, $00
	ld hl, Data_696A
	add hl, bc
	ld a, [hl]
	and a
	jr z, ContinueNoiseSFX.stop
	ldh [rNR43], a		; noise characteristics
	ret

FireBreathChannelData:: ; 6993
	db $00, $6D, $54, $80

StartFireBreathSFX:: ; 6997
	ld a, $16
	ld hl, FireBreathChannelData
	jp Jmp_69C6

BlockShatterChannelData:: ; 699F
	db $00, $F2, $55, $80

StartBrickShatterSFX:: ; 69A3
	call Call_695F
	ret z
	ld a, $15
	ld hl, BlockShatterChannelData
	jp Jmp_69C6

ContinueNoiseSFX:: ; 69AF
	call updateSoundProgress
	and a
	ret nz
.stop
	xor a
	ld [$DFF9], a
	ld a, $08
	ldh [rNR42], a		; mute noise channel, setup envelope?
	ld a, $80
	ldh [rNR44], a		; trigger noise, consecutive mode
	ld hl, $DF4F		; noise?
	res 7, [hl]
	ret

; write SFX data to the channels (from where?)
; DE starts at DFxx + 2 (DFE2, DFFA, like that)
Jmp_69C6:: ; 69C6
	push af
	dec e			; using DFE- as example, but it holds for other engines as well
	ldh a, [$FFD1]
	ld [de], a		; DFE1 - currently playing sound
	inc e
	pop af
	inc e
	ld [de], a		; DFE3 - sound duration
	dec e
	xor a
	ld [de], a		; DFE2 - position
	inc e
	inc e
	ld [de], a		; DFE4
	inc e
	ld [de], a		; DFE5
	ld a, e
	cp a, $E5
	jr z, SetupChannel.square1
	cp a, $F5
	jr z, SetupChannel.wave
	cp a, $FD
	jr z, SetupChannel.noise
	ret

; copy HL to channel registers
SetupChannel:: ; 69E5
.square1
	push bc
	ld c, LOW(rNR10)
	ld b, $05
	jr .loopCopy

.square2
	push bc
	ld c, LOW(rNR21)
	ld b, $04
	jr .loopCopy

.wave
	push bc
	ld c, LOW(rNR30)
	ld b, $05
	jr .loopCopy

.noise
	push bc
	ld c, LOW(rNR41)
	ld b, $04
.loopCopy				; copy B bytes from HL to the channel in C
	ldi a, [hl]
	ld [$FF00+c], a
	inc c
	dec b
	jr nz, .loopCopy
	pop bc
	ret

; do a lookup in HL
LookupSoundPointer:: ; 6A07
	inc e
	ldh [$FFD1], a
.lookup
	inc e
	dec a				; go from 1-based to 0-based
	sla a				; a pointer is two bytes
	ld c, a
	ld b, $00
	add hl, bc
	ld c, [hl]
	inc hl
	ld b, [hl]			; load in BC
	ld l, c
	ld h, b
	ld a, h				; HL  BC
	ret

updateSoundProgress:: ;; 6A19
	push de			; DE is DFE0(or other) + 2 here
	ld l, e
	ld h, d			; HL  DE
	inc [hl]		; increment position
	ldi a, [hl]
	cp [hl]			; and compare with sound length
	jr nz, .out
	dec l			; end of sound, return zero
	xor a
	ld [hl], a
.out
	pop de
	ret

; copy HL to wave pattern
SetupWavePattern:: ; 6A26
	push bc
	ld c, $30		; FF30 Wave pattern RAM
.loop
	ldi a, [hl]
	ld [$FF00+c], a
	inc c
	ld a, c
	cp a, $40
	jr nz, .loop
	pop bc
	ret

_InitSound:: ; 6A33
	xor a
	ld [$DFE1], a
	ld [$DFE9], a
	ld [$DFF1], a
	ld [$DFF9], a	; currently playing music and sfx
	ld [$DF1F], a
	ld [$DF2F], a
	ld [$DF3F], a
	ld [$DF4F], a
	ldh [hPauseUnpauseMusic], a
	ldh [$FFDE], a
	ld a, $FF
	ldh [rNR51], a	; enable all channels to both outputs
.muteChannels
	ld a, $08
	ldh [rNR12], a
	ldh [rNR22], a
	ldh [rNR42], a	; volume to zero, enable envelope?
	ld a, $80
	ldh [rNR14], a
	ldh [rNR24], a
	ldh [rNR44], a	; restart sound, counter mode
	xor a
	ldh [rNR10], a	; disable sweep
	ldh [rNR30], a	; disable wave
	ret

PlaySquareSFX:: ; 6A6A
	ld de, $DFE0			; non zero to start sfx
	ld a, [de]
	and a
	jr z, .continue			; if zero, play the current sound
	cp a, 12
	jr nc, .continue		; bounds check, 11 sound effects in this "channel"
	ld hl, $DF1F			; lock square channel 1
	set 7, [hl]
	ld hl, Data_6600
	call LookupSoundPointer	; also sets FFD1
	jp hl

.continue
	inc e
	ld a, [de]
	and a
	jr z, .out
	ld hl, Data_6616
	call LookupSoundPointer.lookup
	jp hl

.out					; RET Z? Bug
	ret

PlayNoiseSFX:: ; 6A8E
	ld de, $DFF8
	ld a, [de]
	and a
	jr z, .continue
	cp a, 5
	jr nc, .continue
	ld hl, $DF4F
	set 7, [hl]			; lock noise channel
	ld hl, Data_662C
	call LookupSoundPointer
	jp hl

.continue
	inc e
	ld a, [de]
	and a
	jr z, .out
	ld hl, Data_6634
	call LookupSoundPointer.lookup
	jp hl

.out				; forgot about RET Z? Bug
	ret

_Unreachable ; 6AB2
	jp _InitSound

StartMusic:: ; 6AB5
	ld hl, $DFE8
	ldi a, [hl]
	and a
	ret z
	cp a, $14
	ret nc				; 19 songs, bounds check
	ld [hl], a			; DFE9
	cp a, $FF			; Can never be true. Possibly -1 was used as a sentinel
	jr z, _Unreachable	; to stop all sound, like in Pokemon
	ld b, a
	ld hl, Data_663C
	ld a, b
	and a, $1F			; Huh?
	call LookupSoundPointer.lookup
	call Call_6B8C
	jp .initStereo		; Weird

.initStereo
	ld a, [$DFE9]
	ld hl, StereoData
.loop
	dec a
	jr z, .writeStereoData
	inc hl
	inc hl
	inc hl
	inc hl
	jr .loop

.writeStereoData
	ldi a, [hl]
	ldh [hMonoOrStereo], a
	ldi a, [hl]
	ldh [hPanInterval], a
	ldi a, [hl]
	ldh [hChannelEnableMask1], a
	ldh [rNR51], a
	ldi a, [hl]
	ldh [hChannelEnableMask2], a
	xor a
	ldh [hPanTimer], a
	ldh [hPanCounter], a
	ret

PanExplosion:: ; 6AF6
	ld a, [$DFF9]
	cp a, SFX_EXPLOSION		; Hmh?
	ret nz
	ld a, [hl]				; Always FFD5. Bug
	bit 1, a				; Every two ticks?
	ld a, $F7				; Noise left enable
	jr z, .applyMask
	ld a, $7F				; Noise right enable
.applyMask
	call PanStereo.applyChannelEnableMasks
.ret
	ret

PanStereo:: ; 6B09
	ld a, [$DFE9]
	and a
	ret z
	ldh a, [hMonoOrStereo]
	cp a, $01				; 01 = Mono, 02 = Stereo
	jr z, PanExplosion.ret	; Bug... RET Z
	ld hl, hPanTimer
	call PanExplosion		; Skips over following code if explosion is playing
	inc [hl]				; FFD5 - hPanTimer
	ldi a, [hl]
	cp [hl]					; FFD6 - hPanInterval
	ret nz
	dec l
	ld [hl], $00			; FFD5 - hPanTimer
	inc l
	inc l
	inc [hl]				; FFD7 - hPanCounter
	ldh a, [hChannelEnableMask1]
	bit 0, [hl]				; Counter is only used for its lowest bit... Bug
	jr z, .applyChannelEnableMasks
	ldh a, [hChannelEnableMask2]
.applyChannelEnableMasks
	ldh [rNR51], a
	ret

; Four bytes:
; 1: hMonoOrStereo - 01 if mono, 02 if stereo
; 2: hPanInterval - Ticks between panning
; 3: hChannelEnableMask1
; 4: hChannelEnableMask2
; Quite some unused masks. Bug?
StereoData:: ; 6B2F
	db $02, $24, $ED, $DE	; Music 1
	db $01, $18, $BD, $00
	db $02, $20, $7F, $B7
	db $01, $18, $ED, $7F
	db $01, $18, $FF, $F7	; Music 5
	db $02, $40, $7F, $F7
	db $02, $40, $7F, $F7
	db $01, $18, $FF, $F7
	db $01, $10, $FF, $A5
	db $01, $00, $65, $00	; Music 10
	db $01, $00, $FF, $00
	db $02, $08, $7F, $B5
	db $01, $00, $ED, $00
	db $01, $00, $ED, $00
	db $01, $00, $FF, $00	; Music 15
	db $01, $00, $ED, $00
	db $02, $18, $7E, $E7
	db $01, $18, $ED, $E7
	db $01, $00, $DE, $00	; Music 19

; copy 2 bytes from the address at HL to DE
CopyPointerIndirect:: ; 6B7B
	ldi a, [hl]
	ld c, a
	ld a, [hl]
	ld b, a
	ld a, [bc]
	ld [de], a
	inc e
	inc bc
	ld a, [bc]
	ld [de], a
	ret

; copy 2 bytes from HL to DE
CopyPointer:: ; 6B86
	ldi a, [hl]
	ld [de], a
	inc e
	ldi a, [hl]
	ld [de], a
	ret

; setup array of addresses and such at DF00-DF4F
; HL contains the pointer from Data_663C
Call_6B8C::; 6B8C
	call _InitSound.muteChannels
	xor a
	ldh [$FFD5], a
	ldh [$FFD7], a
	ld de, $DF00
	ld b, $00
	ldi a, [hl]
	ld [de], a				; byte 0 goes into DF00 (unused, always zero?)
	inc e
	call CopyPointer			; byte 1,2 into DF01, DF02
	ld de, $DF10
	call CopyPointer			; byte 3,4 DF10
	ld de, $DF20
	call CopyPointer			; byte 5,6 DF20
	ld de, $DF30
	call CopyPointer			; byte 7,8 DF30
	ld de, $DF40
	call CopyPointer			; byte 9,10 DF40
	ld hl, $DF10			; 
	ld de, $DF14
	call CopyPointerIndirect
	ld hl, $DF20
	ld de, $DF24
	call CopyPointerIndirect
	ld hl, $DF30
	ld de, $DF34
	call CopyPointerIndirect
	ld hl, $DF40
	ld de, $DF44
	call CopyPointerIndirect
	ld bc, $0410		; 4 loops, $10 bytes between each DFx2
	ld hl, $DF12
.loop
	ld [hl], $01		; set them all to 1
	ld a, c
	add l
	ld l, a
	dec b
	jr nz, .loop
	xor a
	ld [$DF1E], a
	ld [$DF2E], a
	ld [$DF3E], a
	ret

Jmp_6BF4 ; 6BF4
	push hl
	xor a
	ldh [rNR30], a		; disable wave channel
	ld l, e
	ld h, d
	call SetupWavePattern
	pop hl
	jr Jmp_6C00.jmp_6C2A

Jmp_6C00 ; 6C00
	call IncrementPointer
	call LoadFromHLindirect
	ld e, a
	call IncrementPointer
	call LoadFromHLindirect
	ld d, a
	call IncrementPointer
	call LoadFromHLindirect
	ld c, a
	inc l
	inc l
	ld [hl], e					; DFx6- will go into NRx2
	inc l
	ld [hl], d					; DFx7 - always 0 or 6F
	inc l
	ld [hl], c					; DFx8 - will go into NRx1
	dec l
	dec l
	dec l
	dec l
	push hl
	ld hl, hCurrentChannel		; unnecessary, it's in HRAM. Bug
	ld a, [hl]
	pop hl
	cp a, 3						; wave channel
	jr z, Jmp_6BF4
.jmp_6C2A
	call IncrementPointer
	jp PlayMusic.jmp_6CD7

; increment the address located at HL
IncrementPointer:: ; 6C30
	push de
	ldi a, [hl]
	ld e, a
	ldd a, [hl]
	ld d, a
	inc de
.storeDE
	ld a, e
	ldi [hl], a
	ld a, d
	ldd [hl], a
	pop de
	ret

IncrementPointerTwice:: ; 6C3C
	push de
	ldi a, [hl]
	ld e, a
	ldd a, [hl]
	ld d, a
	inc de
	inc de
	jr IncrementPointer.storeDE

; todo name
LoadFromHLindirect:: ; 6C45
	ldi a, [hl]
	ld c, a
	ldd a, [hl]
	ld b, a				; BC  [HL]
	ld a, [bc]			; A  [BC]
	ld b, a				; B  [BC]
	ret

Jmp_6C4C
	pop hl
	jr .jmp_6C7A

.jmp_6C4F
	ldh a, [hCurrentChannel]
	cp a, $03			; wave
	jr nz, .jmp_6C65
	ld a, [$DF38]
	bit 7, a
	jr z, .jmp_6C65
	ld a, [hl]			; DF32?
	cp a, $06
	jr nz, .jmp_6C65
	ld a, $40
	ldh [rNR32], a		; wave channel volume
.jmp_6C65
	push hl
	ld a, l
	add a, $09
	ld l, a
	ld a, [hl]			; DFxB
	and a
	jr nz, Jmp_6C4C
	ld a, l
	add a, $04
	ld l, a
	bit 7, [hl]			; DFxF lock status
	jr nz, Jmp_6C4C		; jump if locked
	pop hl
	call PlayMusic.jmp_6DDC
.jmp_6C7A
	dec l
	dec l
	jp PlayMusic.nextChannel

.jmp_6C7F
	dec l
	dec l
	dec l
	dec l
	call IncrementPointerTwice
.jmp_6C86
	ld a, l
	add a, $04
	ld e, a
	ld d, h
	call CopyPointerIndirect
	cp a, $00
	jr z, .stopSong
	cp a, $FF
	jr z, .restartChannel
	inc l
	jp PlayMusic.jmp_6CD5

.restartChannel
	dec l
	push hl
	call IncrementPointerTwice		; skip over FFFF
	call LoadFromHLindirect
	ld e, a
	call IncrementPointer
	call LoadFromHLindirect
	ld d, a						; DE is restart pointer
	pop hl
	ld a, e
	ldi [hl], a					; put it in DFx0-DFx1
	ld a, d
	ldd [hl], a
	jr .jmp_6C86

.stopSong
	ld hl, $DFE9
	ld [hl], $00
	ld a, $FF
	ldh [rNR51], a
	call _InitSound.muteChannels
	ret

PlayMusic:: ; 6CBE
	ld hl, $DFE9				; music currently playing
	ld a, [hl]
	and a
	ret z
	ld a, 1						; start from channel 1, square (with sweep)
	ldh [hCurrentChannel], a
	ld hl, $DF10
.jmp_6CCB
	inc l
	ldi a, [hl]					; DFx1
	and a
	jp z, Jmp_6C4C.jmp_6C7A
	dec [hl]					; DFx2
	jp nz, Jmp_6C4C.jmp_6C4F
.jmp_6CD5
	inc l
	inc l
.jmp_6CD7
	call LoadFromHLindirect		; DFx4 - DFx5
	cp a, $00					; stores a copy in B
	jp z, Jmp_6C4C.jmp_6C7F
	cp a, $9D
	jp z, Jmp_6C00
	and a, $F0
	cp a, $A0					; set note length?
	jr nz, .jmp_6D04
	ld a, b
	and a, $0F
	ld c, a
	ld b, $00
	push hl
	ld de, $DF01
	ld a, [de]
	ld l, a
	inc de
	ld a, [de]
	ld h, a						; HL  note lengths pointer?
	add hl, bc
	ld a, [hl]
	pop hl
	dec l
	ldi [hl], a					; DFx3
	call IncrementPointer
	call LoadFromHLindirect		; DFx4 - DFx5
.jmp_6D04
	ld a, b
	ld c, a
	ld b, $00
	call IncrementPointer		; DFx4 - DFx5
	ldh a, [hCurrentChannel]
	cp a, 4						; Noise
	jp z, .jmp_6D34
	push hl
	ld a, l
	add a, $05
	ld l, a
	ld e, l
	ld d, h						; DFx9
	inc l
	inc l
	ld a, c
	cp a, $01
	jr z, .jmp_6D2F
	ld [hl], 00					; DFxB
	ld hl, NotePitches
	add hl, bc
	ldi a, [hl]
	ld [de], a					; DFx9
	inc e
	ld a, [hl]
	ld [de], a					; DFxA
	pop hl
	jp .jmp_6D4B

.jmp_6D2F
	ld [hl], $01
	pop hl
	jr .jmp_6D4B

.jmp_6D34						; Noisy stuff
	push hl
	ld de, $DF46				; volume (envelope)?
	ld hl, Data_6F06
	add hl, bc
.loop
	ldi a, [hl]
	ld [de], a
	inc e
	ld a, e
	cp a, $4B
	jr nz, .loop
	ld c, LOW(rNR41)
	ld hl, $DF44
	jr .jmp_6D78

.jmp_6D4B
	push hl
	ldh a, [hCurrentChannel]
	cp a, 1					; Square 1
	jr z, .jmp_6D73
	cp a, 2					; Square 2
	jr z, .jmp_6D6F
	ld c, LOW(rNR30)		; Wave
	ld a, [$DF3F]			; Lock
	bit 7, a
	jr nz, .jmp_6D64
	xor a
	ld [$FF00+c], a
	ld a, $80
	ld [$FF00+c], a
.jmp_6D64
	inc c
	inc l
	inc l
	inc l
	inc l
	ldi a, [hl]
	ld e, a
	ld d, $00
	jr .jmp_6D84

.jmp_6D6F
	ld c, LOW(rNR21)
	jr .jmp_6D78

.jmp_6D73
	ld c, LOW(rNR10)
	ld a, $00
	inc c
.jmp_6D78
	inc l
	inc l
	inc l
	ldd a, [hl]				; DFx7
	and a
	jr nz, .jmp_6DCE
	ldi a, [hl]				; DFx6
	ld e, a
.jmp_6D81
	inc l
	ldi a, [hl]				; DFx8
	ld d, a
.jmp_6D84
	push hl
	inc l
	inc l
	ldi a, [hl]				; DFxB
	and a
	jr z, .jmp_6D8D
	ld e, $08
.jmp_6D8D
	inc l
	inc l
	ld [hl], $00			; DFxE
	inc l
	ld a, [hl]				; DFxF lock
	pop hl
	bit 7, a
	jr nz, .resetNoteTimer	; don't update the channel registers when locked
	ld a, d
	ld [$FF00+c], a			; NRx1
	inc c
	ld a, e
	ld [$FF00+c], a			; NRx2
	inc c
	ldi a, [hl]				; DFx9 freq lo
	ld [$FF00+c], a			; NRx3
	inc c
	ld a, [hl]				; DFxA freq hi
	or a, $80				; trigger
	ld [$FF00+c], a			; NRx4
	ld a, l
	or a, $05				; euhm
	ld l, a
	res 0, [hl]				; DFxF lock? lowest bit
.resetNoteTimer
	pop hl
	dec l
	ldd a, [hl]				; DFx4 - note length
	ldd [hl], a				; DFx3 - note timer
	dec l
.nextChannel
	ld de, hCurrentChannel
	ld a, [de]
	cp a, 4
	jr z, .jmp_6DC1			; done after 4 channels
	inc a
	ld [de], a
	ld de, $0010
	add hl, de
	jp .jmp_6CCB

.jmp_6DC1
	ld hl, $DF1E
	inc [hl]
	ld hl, $DF2E
	inc [hl]
	ld hl, $DF3E
	inc [hl]
	ret

.jmp_6DCE
	ld b, $00
	inc l
	jr .jmp_6D81

.call_6DD3
	ld a, b
	srl a
	ld l, a
	ld h, $00
	add hl, de
	ld e, [hl]
	ret

.jmp_6DDC
	push hl
	ld a, l
	add a, $06
	ld l, a
	ld a, [hl]				; DFx8
	and a, $0F
	jr z, .jmp_6DFC
	ldh [$FFD1], a
	ldh a, [hCurrentChannel]
	ld c, LOW(rNR13)
	cp a, $01				; square 1
	jr z, .jmp_6DFE
	ld c, LOW(rNR23)
	cp a, $02				; square 2
	jr z, .jmp_6DFE
	ld c, LOW(rNR33)
	cp a, $03				; wave
	jr z, .jmp_6DFE
.jmp_6DFC
	pop hl
	ret

.jmp_6DFE
	inc l
	ldi a, [hl]				; DFx9 freq lo
	ld e, a
	ld a, [hl]				; DFxA freq hi
	ld d, a
	push de					; DE  frequency
	ld a, l
	add a, $04
	ld l, a
	ld b, [hl]				; DFxE
	ldh a, [$FFD1]
	cp a, $01				; wut
	jr .jmp_6E18			; huh?

.jmp_6E0F
	cp a, $03
	jr .jmp_6E13			; huh?

.jmp_6E13
	ld hl, $FFFF
	jr .jmp_6E34

.jmp_6E18
	ld de, Data_6E3D
	call .call_6DD3			; loads the value at DE + B/2 into E
	bit 0, b				; if B is even
	jr nz, .jmp_6E24
	swap e					; select high nibble
.jmp_6E24
	ld a, e
	and a, $0F				; lower nibble
	bit 3, a
	jr z, .jmp_6E31
	ld h, $FF
	or a, $F0
	jr .jmp_6E33

.jmp_6E31
	ld h, $00
.jmp_6E33
	ld l, a
.jmp_6E34
	pop de
	add hl, de
	ld a, l
	ld [$FF00+c], a		; freq lo
	inc c
	ld a, h
	ld [$FF00+c], a		; freq hi
	jr .jmp_6DFC

Data_6E3D:: ; 6E3D
	db $00, $00, $00, $00, $00
	db $00, $10, $00, $0F, $00, $00, $11, $00, $0F, $F0
	db $01, $12, $10, $FF, $EF, $01, $12, $10, $FF, $EF
	db $01, $12, $10, $FF, $EF, $01, $12, $10, $FF, $EF
	db $01, $12, $10, $FF, $EF, $01, $12, $10, $FF, $EF
	db $01, $12, $10, $FF, $EF, $01, $12, $10, $FF, $EF

; Chromatic pitches. The number in brackets shows how many cents the pitch
; is off from ideal
NotePitches:: ; 6E74
	dw $F00 ; Bug? Functions as $700, 512 Hz (no note)
	dw $02C ;   65.4 Hz C 2 (-0)
	dw $09C ;   69.3 Hz C#2 (-0) Bug! 09D is closer
	dw $106 ;   73.4 Hz D 2 (-1) Bug! 107 is closer
	dw $16B ;   77.8 Hz D#2 (+0)
	dw $1C9 ;   82.4 Hz E 2 (-0)
	dw $223 ;   87.3 Hz F 2 (+0)
	dw $277 ;   92.5 Hz F#2 (+0)
	dw $2C6 ;   98.0 Hz G 2 (-1) Bug! 2C7 is closer
	dw $312 ;  103.9 Hz G#2 (+1)
	dw $356 ;  109.8 Hz A 2 (-4) Bug! 357 is closer
	dw $39B ;  116.5 Hz A#2 (-0)
	dw $3DA ;  123.4 Hz B 2 (-1)
	dw $416 ;  130.8 Hz C 3 (-0)
	dw $44E ;  138.6 Hz C#3 (-0)
	dw $483 ;  146.8 Hz D 3 (-1)
	dw $4B5 ;  155.5 Hz D#3 (-1)
	dw $4E5 ;  164.9 Hz E 3 (+1)
	dw $511 ;  174.5 Hz F 3 (-1)
	dw $53B ;  184.9 Hz F#3 (-1)
	dw $563 ;  195.9 Hz G 3 (-1)
	dw $589 ;  207.7 Hz G#3 (+1)
	dw $5AC ;  219.9 Hz A 3 (-1)
	dw $5CE ;  233.2 Hz A#3 (+1)
	dw $5ED ;  246.8 Hz B 3 (-1)
	dw $60A ;  261.1 Hz C 4 (-3) Bug! 60B is closer
	dw $627 ;  277.1 Hz C#4 (-0)
	dw $642 ;  293.9 Hz D 4 (+1)
	dw $65B ;  311.3 Hz D#4 (+1)
	dw $672 ;  329.3 Hz E 4 (-2)
	dw $689 ;  349.5 Hz F 4 (+1)
	dw $69E ;  370.3 Hz F#4 (+1)
	dw $6B2 ;  392.4 Hz G 4 (+2)
	dw $6C4 ;  414.8 Hz G#4 (-2)
	dw $6D6 ;  439.8 Hz A 4 (-1)
	dw $6E7 ;  466.4 Hz A#4 (+1)
	dw $6F7 ;  494.6 Hz B 4 (+3)
	dw $706 ;  524.3 Hz C 5 (+3)
	dw $714 ;  555.4 Hz C#5 (+3)
	dw $721 ;  587.8 Hz D 5 (+1)
	dw $72D ;  621.2 Hz D#5 (-3)
	dw $739 ;  658.7 Hz E 5 (-2)
	dw $744 ;  697.2 Hz F 5 (-3)
	dw $74F ;  740.5 Hz F#5 (+1)
	dw $759 ;  784.9 Hz G 5 (+2)
	dw $762 ;  829.6 Hz G#5 (-2)
	dw $76B ;  879.7 Hz A 5 (-1)
	dw $773 ;  929.6 Hz A#5 (-5)
	dw $77B ;  985.5 Hz B 5 (-4)
	dw $783 ; 1048.6 Hz C 6 (+3)
	dw $78A ; 1110.8 Hz C#6 (+3)
	dw $790 ; 1170.3 Hz D 6 (-6)
	dw $797 ; 1248.3 Hz D#6 (+5)
	dw $79D ; 1324.0 Hz E 6 (+7)
	dw $7A2 ; 1394.4 Hz F 6 (-3)
	dw $7A7 ; 1472.7 Hz F#6 (-9)
	dw $7AC ; 1560.4 Hz G 6 (-8)
	dw $7B1 ; 1659.1 Hz G#6 (-2)
	dw $7B6 ; 1771.2 Hz A 6 (+11)
	dw $7BA ; 1872.5 Hz A#6 (+7)
	dw $7BE ; 1985.9 Hz B 6 (+9)
	dw $7C1 ; 2080.5 Hz C 7 (-10)
	dw $7C4 ; 2184.5 Hz C#7 (-26) Bug! 7C5 is closer
	dw $7C8 ; 2340.6 Hz D 7 (-6)
	dw $7CB ; 2473.1 Hz D#7 (-11)
	dw $7CE ; 2621.4 Hz E 7 (-10)
	dw $7D1 ; 2788.8 Hz F 7 (-3)
	dw $7D4 ; 2978.9 Hz F#7 (+11)
	dw $7D6 ; 3120.8 Hz G 7 (-8)
	dw $7D9 ; 3360.8 Hz G#7 (+20)
	dw $7DB ; 3542.5 Hz A 7 (+11)
	dw $7DD ; 3744.9 Hz A#7 (+7)
	dw $7DF ; 3971.9 Hz B 7 (+9)

Data_6F06:: ; 6F06
	db $00
	db $00, $00, $00, $00, $C0 ; 1
	db $A1 ,$00, $3A, $00, $C0 ; 6
	db $B1, $00, $29, $01, $C0 ; 11
	db $81, $00, $29, $04, $C0 ; 16

TriangeWavePattern:: ; 6F1B
	db $01, $23, $45, $67, $89, $AB, $CD, $EF
	db $FE, $DC, $BA, $98, $76, $54, $32, $10

SawtoothWavePattern:: ; 6F2B
	db $01, $12, $23, $34, $45, $56, $67, $78
	db $89, $9A, $AB, $BC, $CD, $DD, $EE, $FF

WavePattern_6F3B:: ; 6F3B ~sum of three cosines.
	db $01, $23, $56, $78, $99, $98, $76, $67
	db $9A, $DF, $FE, $C9, $85, $42, $11, $00

BossCryWavePattern:: ; 6F4B
	db $01, $23, $45, $67, $89, $AB, $CC, $CD
	db $00, $0C, $B0, $BB, $00, $FB, $BB, $BB

; Note lengths?
Data_6F5B:: ; 6F5B
	db 2, 3, 6, 12, 24, 48
	db       9, 18, 36
	db    4, 8

Data_6F66:: ; 6F66
	db 2, 4,  8, 16, 32, 64
	db       12, 24, 48
	db    5, 10
	db 1

Data_6F72:: ; 6F72
	db 0, 5, 10, 20, 40, 80
	db       15, 30, 60

Data_6F7B:: ; 6F7B
	db 3, 6, 12, 24, 48, 96
	db       18, 36, 72
	db    8, 16

Data_6F86:: ; 6F86
	db 0, 7, 14, 28, 56, 112
	db       21, 42, 84

; Unused, 8/7 times slower than the previous one
Data_6F8F:: ; 6F8F
	db 4, 8, 16, 32, 64, 128
	db       24, 48, 96

SECTION "TODO name", ROMX[$7FF0], BANK[3]
; gets called from timer interrupt
Call_7FF0:: ; 7FF0
	jp _Call_7FF0

InitSound:: ; 7FF3
	jp _InitSound
